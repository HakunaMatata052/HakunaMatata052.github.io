<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>程序园-ICU</title>
  
  <subtitle>程序猿的重点-ICU!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hakunamatata052.github.io/"/>
  <updated>2022-06-06T07:04:20.531Z</updated>
  <id>https://hakunamatata052.github.io/</id>
  
  <author>
    <name>Hakunamatata</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>检测开发工具是否被打开和无限debugger的设置与破解</title>
    <link href="https://hakunamatata052.github.io/2022/06/06/debugger/"/>
    <id>https://hakunamatata052.github.io/2022/06/06/debugger/</id>
    <published>2022-06-06T07:01:00.000Z</published>
    <updated>2022-06-06T07:04:20.531Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>诸如<a href="http://www.4399.com/flash/18012.htm">4399小游戏</a>这类网站，为了防止被别人扒代码，一般都会设置检测用户是否打开开发者工具（F12），并且如果是打开的那么会无限弹出debugger，让用户无法通过开发者工具调试代码。<br>弹出无限debugger的原理也很简单，就是设置一个定时器，或者使用递归无限调用debugger。</p><h2 id="无限debugger"><a href="#无限debugger" class="headerlink" title="无限debugger"></a>无限debugger</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;[<span class="string">&#x27;constructor&#x27;</span>](<span class="string">&#x27;debugger&#x27;</span>)())</span><br><span class="line">    &#125;, <span class="number">100</span>)</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">debug</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;[<span class="string">&#x27;constructor&#x27;</span>](<span class="string">&#x27;debugger&#x27;</span>)());</span><br><span class="line">        debug()</span><br><span class="line">    &#125;</span><br><span class="line">    debug()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>两个函数都放在匿名函数内是防止有人将函数设置为空（防君子🐶）</p><h2 id="破解无限debugger"><a href="#破解无限debugger" class="headerlink" title="破解无限debugger"></a>破解无限debugger</h2><p>破解方法也很简单，直接在开发工具中设置跳过断点即可<br><img src="./WeChat093352cb57fe95123f434f6c1526a86d.png" alt="跳过断点"><br>如果你想在自己写的chrome插件中在页面加载前将debugger清除掉，可以设置以下两段代码来清除<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;).constructor === <span class="built_in">Function</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.constructor = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></p><h2 id="检测用户是否打开了开发工具"><a href="#检测用户是否打开了开发工具" class="headerlink" title="检测用户是否打开了开发工具"></a>检测用户是否打开了开发工具</h2><p>检测方法有很多，诸如监听快捷键，比较窗口与可视窗口大小等，但是这类都很容易破解。<br>比较好的方法是，可以记录debugger前后时间，然后计算时间差，如果前后时间差过长（大于2s），那就基本可以认定是有人点了断点继续按钮了，如果是小于2s，也可能是人为点击的，这时候就需要进一步判断，设置一个计数器，如果小于2s的次数过多，那么也可以判断这就是人为点击的。<br>具体代码如下(此段摘录于4399小游戏)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consoleOpenCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;关闭调试窗&#x27;</span>);</span><br><span class="line">    <span class="built_in">window</span>.location.reload();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Anti_numtots = <span class="number">0</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>._windon_handler = <span class="built_in">setInterval</span>( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> before = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">        <span class="keyword">var</span> after = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        <span class="keyword">if</span> (after.getTime() - before.getTime() &gt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (after.getTime() - before.getTime() &gt; <span class="number">2000</span>) &#123;</span><br><span class="line">                consoleOpenCallback();</span><br><span class="line">                <span class="built_in">clearInterval</span>(_windon_handler);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                Anti_numtots++;</span><br><span class="line">                <span class="keyword">if</span>(Anti_numtots&gt;=<span class="number">2</span>)&#123;</span><br><span class="line">                    consoleOpenCallback();</span><br><span class="line">                    <span class="built_in">clearInterval</span>(_windon_handler);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Anti_numtots = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;诸如&lt;a href=&quot;http://www.4399.com/flash/18012.htm&quot;&gt;4399小游戏&lt;/a&gt;这类网站，为了防止被别
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
    
      <category term="debugger" scheme="https://hakunamatata052.github.io/tags/debugger/"/>
    
  </entry>
  
  <entry>
    <title>whistle抓包工具</title>
    <link href="https://hakunamatata052.github.io/2022/04/21/whistle/"/>
    <id>https://hakunamatata052.github.io/2022/04/21/whistle/</id>
    <published>2022-04-21T04:03:36.000Z</published>
    <updated>2022-04-22T02:23:33.769Z</updated>
    
    <content type="html"><![CDATA[<h1 id="为什么要使用"><a href="#为什么要使用" class="headerlink" title="为什么要使用"></a>为什么要使用</h1><ul><li>1、方便在本地模拟修改线上资源</li><li>2、防止正式环境与开发环境代码各种资源路径、接口路径不同，导致上线未修改引用的是本地资源</li><li>3、可以在真机上审查元素，重构问题一目了然</li><li>4、mock数据</li><li>5、待补充</li></ul><h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><h2 id="安装Whistle【抓包工具】"><a href="#安装Whistle【抓包工具】" class="headerlink" title="安装Whistle【抓包工具】"></a>安装Whistle<code>【抓包工具】</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i whistle -g</span><br><span class="line">// 或</span><br><span class="line">yarn add global whistle</span><br></pre></td></tr></table></figure><h2 id="启动whistle"><a href="#启动whistle" class="headerlink" title="启动whistle"></a>启动whistle</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 start</span><br></pre></td></tr></table></figure><h2 id="终端代理"><a href="#终端代理" class="headerlink" title="终端代理"></a>终端代理</h2><p>whistle只是一个抓包工具，他可以拦截并修改请求内容。可以简单的理解为服务端（类似vpn服务器）。<br>有了服务器，你的本机（pc或手机）需要<code>代理</code>(类似于vpn软件)</p><h3 id="pc端代理"><a href="#pc端代理" class="headerlink" title="pc端代理"></a>pc端代理</h3><p>安装Chrome的SwitchyOmega插件 <a href="./Proxy-SwitchyOmega_v2.5.21.zip">点击下载</a><br>按图示配置代理<br><img src="./WX20220420-155500.png" alt="SwitchyOmega插件"><br>当SwitchyOmega插件选择<code>proxy</code>时，即表示代理到whistle抓包工具，选择<code>系统代理</code>时，表示使用系统的vpn等代理，如链接ulinkVPN时，或使用其他vpn时，当选择<code>直接链接</code>时，表示不使用任何代理及vpn，此时使用ulinkVPN无效。</p><h3 id="移动端代理"><a href="#移动端代理" class="headerlink" title="移动端代理"></a>移动端代理</h3><p>移动端无需安装插件，直接将wifi链接至和本机电脑统一局域网的wifi中即可。<br>此时选择链接的wifi，在wifi设置中将代理选项打开，ip地址填写电脑的ip地址，此ip地址也可以在whistle工具中查看，本机电脑打开<a href="http://127.0.0.1:8899">http://127.0.0.1:8899</a>，点击<code>Online</code>即可看到本机ip地址<br><img src="./WX20220420-160441.png" alt="安全证书"></p><h2 id="安装https证书"><a href="#安装https证书" class="headerlink" title="安装https证书"></a>安装https证书</h2><p>顶部菜单栏点击https勾选如图所示<br><img src="./WX20220420-160811.png" alt="本机ip"><br>终端已经配置好代理的情况下：</p><ul><li>移动端扫码下载安装安全证书</li><li>pc端点击<code>Download RootCA</code>（安装选项自行百度）</li><li>或直接<a href="./rootCA.crt">点击下载</a><br>ios端需要注意的是，安装好证书后，需要在<code>通用</code>-<code>关于本机</code>-<code>证书信任设置</code>中打开whistle.XXXXXXXXXX<h2 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h2>此时已经可以进行http和https的抓包了，在network中可以看到被代理的设备发出的http请求，以及请求的参数，返回的内容。<br><img src="./WX20220420-161644.png" alt="network"><h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2>如何将线上的资源使用本地资源代替？<br>在<code>rules</code>中配置规则，一下时候简单的几种规则<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tencent.com 127.0.0.1 # tencent.com域名下所有资源代理到本地ip，类似于配置hosts</span><br><span class="line">https://tencent.com http://127.0.0.1 # 将https的线上地址代理到没有https的本地环境</span><br><span class="line">https://tencent.com https://localhost:8888 # 将线上地址代理到特殊端口的本地环境</span><br><span class="line">https://tencent.com/app.js D://doc/app.js # 将线上某个文件代理到本地文件</span><br></pre></td></tr></table></figure><h2 id="微信内审查元素"><a href="#微信内审查元素" class="headerlink" title="微信内审查元素"></a>微信内审查元素</h2>使用<code>vconsole</code>虽然能查看大部分页面dom，请求等，但是无法直观的看到某个重构页面的dom具体位置，大小，内外边距等。<br>使用Whistle整合的weinre即可在电脑端审查移动设备的dom元素。<br>首先在<code>rules</code>中配置<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://* weinre:// # 表示将所有https请求通过weinre工具抓包，也可设置单独的域名或页面</span><br></pre></td></tr></table></figure>打开顶部导航中的<code>Weinre</code>即可看到移动设备中打开的页面地址，点击地址后再点击顶部菜单中红的Elements即可查看移动设备中的dom节点。<br><img src="./WX20220420-163049.png" alt="Weinre"><br><img src="./WX20220420-163213.png" alt="Weinre"><h2 id="mock数据"><a href="#mock数据" class="headerlink" title="mock数据"></a>mock数据</h2>Whistle可以安装各种插件，mock数据可以安装<code>vase</code><br>具体用法自行百度吧！</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;为什么要使用&quot;&gt;&lt;a href=&quot;#为什么要使用&quot; class=&quot;headerlink&quot; title=&quot;为什么要使用&quot;&gt;&lt;/a&gt;为什么要使用&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1、方便在本地模拟修改线上资源&lt;/li&gt;
&lt;li&gt;2、防止正式环境与开发环境代码各种资源路径、接
      
    
    </summary>
    
      <category term="工具" scheme="https://hakunamatata052.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="whistle 代理" scheme="https://hakunamatata052.github.io/tags/whistle-%E4%BB%A3%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>使用vscode中的eslint插件在非模块化的项目中进行代码提示和格式化</title>
    <link href="https://hakunamatata052.github.io/2022/01/05/vscode-eslint/"/>
    <id>https://hakunamatata052.github.io/2022/01/05/vscode-eslint/</id>
    <published>2022-01-05T04:54:18.000Z</published>
    <updated>2022-01-05T08:09:00.025Z</updated>
    
    <content type="html"><![CDATA[<p>eslint可以在模块化开发的项目中对代码进行提示和格式化，也可以配合vscode的eslint插件进行提示和格式化。<br>那在非模块化的项目中如何达到同样效果呢？比如只有一个index.html和index.js的普通网页中。<br>如图</p><p><video src="/2022/01/05/vscode-eslint/vscode-eslint.mp4" autoplay loop controls style="display:block;margin:auto"></video><br>接下来，讲一下如何使用使用全局eslint依赖和vscode进行代码格式化</p><h3 id="安装全局eslint（建议，也可以安装到本地–跳过本步）"><a href="#安装全局eslint（建议，也可以安装到本地–跳过本步）" class="headerlink" title="安装全局eslint（建议，也可以安装到本地–跳过本步）"></a>安装全局eslint（建议，也可以安装到本地–跳过本步）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo npm i eslint -g</span><br><span class="line">// or</span><br><span class="line">sudo yarn global add eslint</span><br></pre></td></tr></table></figure><h3 id="初始化一个项目"><a href="#初始化一个项目" class="headerlink" title="初始化一个项目"></a>初始化一个项目</h3><p>找一个文件夹来初始化项目，这个文件夹的作用是让vscode来查找eslint插件使用所需依赖，和查找eslint规则的。<br>所以需要放在一个安全点（不容易被清理掉）的文件夹内，我是放在<code>/Users/xxx/vscode-eslint</code>里。<br>然后就想正常做一个模块化开发项目一样，初始化 — 安装依赖<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd vscode-eslint</span><br><span class="line">npm init -y</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure></p><h3 id="初始化eslint"><a href="#初始化eslint" class="headerlink" title="初始化eslint"></a>初始化eslint</h3><p>项目初始化完成后，利用全局依赖eslint来初始化eslint，如果不使用全局的eslint也可以本地安装，做法类似。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint --init</span><br></pre></td></tr></table></figure><br>根据自己的需要选择初始化中的选项。<br>初始化完成后需要修改<code>.eslintrc.js</code>文件。<br>我的文件内配置了typescript相关插件，不需要的化可以删掉，需要的话，还要安装typescript相关依赖（自行Google）。<br><code>.eslintrc.js</code>文件中的rules就是将来vscode代码提示和格式化使用规则了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="string">&#x27;env&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;browser&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;node&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;commonjs&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;amd&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;es6&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;mocha&#x27;</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;es2021&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;extends&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;parser&#x27;</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;parserOptions&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ecmaVersion&#x27;</span>: <span class="number">13</span>,</span><br><span class="line">        <span class="string">&#x27;sourceType&#x27;</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;plugins&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;@typescript-eslint&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;rules&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@typescript-eslint/no-var-requires&#x27;</span>: <span class="number">0</span>, <span class="comment">// 没有定义requires()</span></span><br><span class="line">        <span class="string">&#x27;no-alert&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用alert confirm prompt</span></span><br><span class="line">        <span class="string">&#x27;no-array-constructor&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用数组构造器</span></span><br><span class="line">        <span class="string">&#x27;no-bitwise&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用按位运算符</span></span><br><span class="line">        <span class="string">&#x27;no-caller&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止使用arguments.caller或arguments.callee</span></span><br><span class="line">        <span class="string">&#x27;no-catch-shadow&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止catch子句参数与外部作用域变量同名</span></span><br><span class="line">        <span class="string">&#x27;no-class-assign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止给类赋值</span></span><br><span class="line">        <span class="string">&#x27;no-cond-assign&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止在条件表达式中使用赋值语句</span></span><br><span class="line">        <span class="string">&#x27;no-console&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用console</span></span><br><span class="line">        <span class="string">&#x27;no-const-assign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止修改const声明的变量</span></span><br><span class="line">        <span class="string">&#x27;no-constant-condition&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class="line">        <span class="string">&#x27;no-continue&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用continue</span></span><br><span class="line">        <span class="string">&#x27;no-control-regex&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止在正则表达式中使用控制字符</span></span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止使用debugger</span></span><br><span class="line">        <span class="string">&#x27;no-delete-var&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能对var声明的变量使用delete操作符</span></span><br><span class="line">        <span class="string">&#x27;no-div-regex&#x27;</span>: <span class="number">1</span>,<span class="comment">// 不能使用看起来像除法的正则表达式/=foo/</span></span><br><span class="line">        <span class="string">&#x27;no-dupe-keys&#x27;</span>: <span class="number">2</span>,<span class="comment">// 在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></span><br><span class="line">        <span class="string">&#x27;no-dupe-args&#x27;</span>: <span class="number">2</span>,<span class="comment">// 函数参数不能重复</span></span><br><span class="line">        <span class="string">&#x27;no-duplicate-case&#x27;</span>: <span class="number">2</span>,<span class="comment">// switch中的case标签不能重复</span></span><br><span class="line">        <span class="string">&#x27;no-else-return&#x27;</span>: <span class="number">2</span>,<span class="comment">// 如果if语句里面有return,后面不能跟else语句</span></span><br><span class="line">        <span class="string">&#x27;no-empty&#x27;</span>: <span class="number">2</span>,<span class="comment">// 块语句中的内容不能为空</span></span><br><span class="line">        <span class="string">&#x27;no-empty-character-class&#x27;</span>: <span class="number">2</span>,<span class="comment">// 正则表达式中的[]内容不能为空</span></span><br><span class="line">        <span class="string">&#x27;no-eq-null&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止对null使用==或!=运算符</span></span><br><span class="line">        <span class="string">&#x27;no-eval&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用eval</span></span><br><span class="line">        <span class="string">&#x27;no-ex-assign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止给catch语句中的异常参数赋值</span></span><br><span class="line">        <span class="string">&#x27;no-extend-native&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止扩展native对象</span></span><br><span class="line">        <span class="string">&#x27;no-extra-bind&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止不必要的函数绑定</span></span><br><span class="line">        <span class="string">&#x27;no-extra-boolean-cast&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止不必要的bool转换</span></span><br><span class="line">        <span class="string">&#x27;no-extra-parens&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止非必要的括号</span></span><br><span class="line">        <span class="string">&#x27;no-extra-semi&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止多余的冒号</span></span><br><span class="line">        <span class="string">&#x27;no-fallthrough&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止switch穿透</span></span><br><span class="line">        <span class="string">&#x27;no-floating-decimal&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止省略浮点数中的0 .5 3.</span></span><br><span class="line">        <span class="string">&#x27;no-func-assign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止重复的函数声明</span></span><br><span class="line">        <span class="string">&#x27;no-implicit-coercion&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止隐式转换</span></span><br><span class="line">        <span class="string">&#x27;no-implied-eval&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用隐式eval</span></span><br><span class="line">        <span class="string">&#x27;no-inline-comments&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止行内备注</span></span><br><span class="line">        <span class="string">&#x27;no-inner-declarations&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;functions&#x27;</span>,],<span class="comment">// 禁止在块语句中使用声明（变量或函数）</span></span><br><span class="line">        <span class="string">&#x27;no-invalid-regexp&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止无效的正则表达式</span></span><br><span class="line">        <span class="string">&#x27;no-invalid-this&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止无效的this，只能用在构造器，类，对象字面量</span></span><br><span class="line">        <span class="string">&#x27;no-irregular-whitespace&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能有不规则的空格</span></span><br><span class="line">        <span class="string">&#x27;no-iterator&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用__iterator__ 属性</span></span><br><span class="line">        <span class="string">&#x27;no-label-var&#x27;</span>: <span class="number">2</span>,<span class="comment">// label名不能与var声明的变量名相同</span></span><br><span class="line">        <span class="string">&#x27;no-labels&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止标签声明</span></span><br><span class="line">        <span class="string">&#x27;no-lone-blocks&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止不必要的嵌套块</span></span><br><span class="line">        <span class="string">&#x27;no-lonely-if&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止else语句内只有if语句</span></span><br><span class="line">        <span class="string">&#x27;no-loop-func&#x27;</span>: <span class="number">1</span>,<span class="comment">// 禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></span><br><span class="line">        <span class="string">&#x27;no-mixed-requires&#x27;</span>: [<span class="number">0</span>, <span class="literal">false</span>,],<span class="comment">// 声明时不能混用声明类型</span></span><br><span class="line">        <span class="string">&#x27;no-mixed-spaces-and-tabs&#x27;</span>: [<span class="number">2</span>, <span class="literal">false</span>,],<span class="comment">// 禁止混用tab和空格</span></span><br><span class="line">        <span class="string">&#x27;linebreak-style&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;windows&#x27;</span>,],<span class="comment">// 换行风格</span></span><br><span class="line">        <span class="string">&#x27;no-multi-spaces&#x27;</span>: <span class="number">1</span>,<span class="comment">// 不能用多余的空格</span></span><br><span class="line">        <span class="string">&#x27;no-multi-str&#x27;</span>: <span class="number">2</span>,<span class="comment">// 字符串不能用\换行</span></span><br><span class="line">        <span class="string">&#x27;no-multiple-empty-lines&#x27;</span>: [<span class="number">1</span>, &#123;<span class="string">&#x27;max&#x27;</span>: <span class="number">1</span>,&#125;,],<span class="comment">// 空行最多不能超过1行</span></span><br><span class="line">        <span class="string">&#x27;no-native-reassign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能重写native对象</span></span><br><span class="line">        <span class="string">&#x27;no-negated-in-lhs&#x27;</span>: <span class="number">2</span>,<span class="comment">// in 操作符的左边不能有!</span></span><br><span class="line">        <span class="string">&#x27;no-nested-ternary&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用嵌套的三目运算</span></span><br><span class="line">        <span class="string">&#x27;no-new&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止在使用new构造一个实例后不赋值</span></span><br><span class="line">        <span class="string">&#x27;no-new-func&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用new Function</span></span><br><span class="line">        <span class="string">&#x27;no-new-object&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用new Object()</span></span><br><span class="line">        <span class="string">&#x27;no-new-require&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用new require</span></span><br><span class="line">        <span class="string">&#x27;no-new-wrappers&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用new创建包装实例，new String new Boolean new Number</span></span><br><span class="line">        <span class="string">&#x27;no-obj-calls&#x27;</span>: <span class="number">1</span>,<span class="comment">// 不能调用内置的全局对象，比如Math() JSON()</span></span><br><span class="line">        <span class="string">&#x27;no-octal&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用八进制数字</span></span><br><span class="line">        <span class="string">&#x27;no-octal-escape&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用八进制转义序列</span></span><br><span class="line">        <span class="string">&#x27;no-param-reassign&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止给参数重新赋值</span></span><br><span class="line">        <span class="string">&#x27;no-path-concat&#x27;</span>: <span class="number">0</span>,<span class="comment">// node中不能使用__dirname或__filename做路径拼接</span></span><br><span class="line">        <span class="string">&#x27;no-plusplus&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用++，--</span></span><br><span class="line">        <span class="string">&#x27;no-process-env&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用process.env</span></span><br><span class="line">        <span class="string">&#x27;no-process-exit&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用process.exit()</span></span><br><span class="line">        <span class="string">&#x27;no-proto&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止使用__proto__属性</span></span><br><span class="line">        <span class="string">&#x27;no-redeclare&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止重复声明变量</span></span><br><span class="line">        <span class="string">&#x27;no-regex-spaces&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止在正则表达式字面量中使用多个空格 /foo bar/</span></span><br><span class="line">        <span class="string">&#x27;no-restricted-modules&#x27;</span>: <span class="number">0</span>,<span class="comment">// 如果禁用了指定模块，使用就会报错</span></span><br><span class="line">        <span class="string">&#x27;no-return-assign&#x27;</span>: <span class="number">1</span>,<span class="comment">// return 语句中不能有赋值表达式</span></span><br><span class="line">        <span class="string">&#x27;no-script-url&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用javascript:void(0)</span></span><br><span class="line">        <span class="string">&#x27;no-self-compare&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能比较自身</span></span><br><span class="line">        <span class="string">&#x27;no-sequences&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用逗号运算符</span></span><br><span class="line">        <span class="string">&#x27;no-shadow&#x27;</span>: <span class="number">2</span>,<span class="comment">// 外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span></span><br><span class="line">        <span class="string">&#x27;no-shadow-restricted-names&#x27;</span>: <span class="number">2</span>,<span class="comment">// 严格模式中规定的限制标识符不能作为声明时的变量名使用</span></span><br><span class="line">        <span class="string">&#x27;no-spaced-func&#x27;</span>: <span class="number">2</span>,<span class="comment">// 函数调用时 函数名与()之间不能有空格</span></span><br><span class="line">        <span class="string">&#x27;no-sparse-arrays&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止稀疏数组， [1,,2]</span></span><br><span class="line">        <span class="string">&#x27;no-sync&#x27;</span>: <span class="number">0</span>,<span class="comment">// nodejs 禁止同步方法</span></span><br><span class="line">        <span class="string">&#x27;no-ternary&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁止使用三目运算符</span></span><br><span class="line">        <span class="string">&#x27;no-trailing-spaces&#x27;</span>: <span class="number">1</span>,<span class="comment">// 一行结束后面不要有空格</span></span><br><span class="line">        <span class="string">&#x27;no-this-before-super&#x27;</span>: <span class="number">0</span>,<span class="comment">// 在调用super()之前不能使用this或super</span></span><br><span class="line">        <span class="string">&#x27;no-throw-literal&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止抛出字面量错误 throw &quot;error&quot;;</span></span><br><span class="line">        <span class="string">&#x27;no-undef&#x27;</span>: <span class="number">1</span>,<span class="comment">// 不能有未定义的变量</span></span><br><span class="line">        <span class="string">&#x27;no-undef-init&#x27;</span>: <span class="number">2</span>,<span class="comment">// 变量初始化时不能直接给它赋值为undefined</span></span><br><span class="line">        <span class="string">&#x27;no-undefined&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能使用undefined</span></span><br><span class="line">        <span class="string">&#x27;no-unexpected-multiline&#x27;</span>: <span class="number">2</span>,<span class="comment">// 避免多行表达式</span></span><br><span class="line">        <span class="string">&#x27;no-underscore-dangle&#x27;</span>: <span class="number">1</span>,<span class="comment">// 标识符不能以_开头或结尾</span></span><br><span class="line">        <span class="string">&#x27;no-unneeded-ternary&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止不必要的嵌套 var isYes = answer === 1 ? true : false;</span></span><br><span class="line">        <span class="string">&#x27;no-unreachable&#x27;</span>: <span class="number">2</span>,<span class="comment">// 不能有无法执行的代码</span></span><br><span class="line">        <span class="string">&#x27;no-unused-expressions&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止无用的表达式</span></span><br><span class="line">        <span class="string">&#x27;no-unused-vars&#x27;</span>: [<span class="number">2</span>, &#123;<span class="string">&#x27;vars&#x27;</span>: <span class="string">&#x27;all&#x27;</span>, <span class="string">&#x27;args&#x27;</span>: <span class="string">&#x27;after-used&#x27;</span>,&#125;,],<span class="comment">// 不能有声明后未被使用的变量或参数</span></span><br><span class="line">        <span class="string">&#x27;no-use-before-define&#x27;</span>: <span class="number">2</span>,<span class="comment">// 未定义前不能使用</span></span><br><span class="line">        <span class="string">&#x27;no-useless-call&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止不必要的call和apply</span></span><br><span class="line">        <span class="string">&#x27;no-void&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁用void操作符</span></span><br><span class="line">        <span class="string">&#x27;no-var&#x27;</span>: <span class="number">0</span>,<span class="comment">// 禁用var，用let和const代替</span></span><br><span class="line">        <span class="string">&#x27;no-warning-comments&#x27;</span>: [<span class="number">1</span>, &#123; <span class="string">&#x27;terms&#x27;</span>: [<span class="string">&#x27;todo&#x27;</span>, <span class="string">&#x27;fixme&#x27;</span>, <span class="string">&#x27;xxx&#x27;</span>,], <span class="string">&#x27;location&#x27;</span>: <span class="string">&#x27;start&#x27;</span>, &#125;,],<span class="comment">// 不能有警告备注</span></span><br><span class="line">        <span class="string">&#x27;no-with&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁用with</span></span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;array-bracket-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 是否允许非空数组里面有多余的空格</span></span><br><span class="line">        <span class="string">&#x27;arrow-parens&#x27;</span>: <span class="number">0</span>,<span class="comment">// 箭头函数用小括号括起来</span></span><br><span class="line">        <span class="string">&#x27;arrow-spacing&#x27;</span>: <span class="number">0</span>,<span class="comment">// =&gt;的前/后括号</span></span><br><span class="line">        <span class="string">&#x27;accessor-pairs&#x27;</span>: <span class="number">0</span>,<span class="comment">// 在对象中使用getter/setter</span></span><br><span class="line">        <span class="string">&#x27;block-scoped-var&#x27;</span>: <span class="number">0</span>,<span class="comment">// 块语句中使用var</span></span><br><span class="line">        <span class="string">&#x27;brace-style&#x27;</span>: [<span class="number">1</span>, <span class="string">&#x27;1tbs&#x27;</span>,],<span class="comment">// 大括号风格</span></span><br><span class="line">        <span class="string">&#x27;callback-return&#x27;</span>: <span class="number">1</span>,<span class="comment">// 避免多次调用回调什么的</span></span><br><span class="line">        <span class="string">&#x27;camelcase&#x27;</span>: <span class="number">2</span>,<span class="comment">// 强制驼峰法命名</span></span><br><span class="line">        <span class="string">&#x27;comma-dangle&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 对象字面量项尾不能有逗号</span></span><br><span class="line">        <span class="string">&#x27;comma-spacing&#x27;</span>: <span class="number">0</span>,<span class="comment">// 逗号前后的空格</span></span><br><span class="line">        <span class="string">&#x27;comma-style&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;last&#x27;</span>,],<span class="comment">// 逗号风格，换行时在行首还是行尾</span></span><br><span class="line">        <span class="string">&#x27;complexity&#x27;</span>: [<span class="number">0</span>, <span class="number">11</span>,],<span class="comment">// 循环复杂度</span></span><br><span class="line">        <span class="string">&#x27;computed-property-spacing&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 是否允许计算后的键名什么的</span></span><br><span class="line">        <span class="string">&#x27;consistent-return&#x27;</span>: <span class="number">0</span>,<span class="comment">// return 后面是否允许省略</span></span><br><span class="line">        <span class="string">&#x27;consistent-this&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;that&#x27;</span>,],<span class="comment">// this别名</span></span><br><span class="line">        <span class="string">&#x27;constructor-super&#x27;</span>: <span class="number">0</span>,<span class="comment">// 非派生类不能调用super，派生类必须调用super</span></span><br><span class="line">        <span class="string">&#x27;curly&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;all&#x27;</span>,],<span class="comment">// 必须使用 if()&#123;&#125; 中的&#123;&#125;</span></span><br><span class="line">        <span class="string">&#x27;default-case&#x27;</span>: <span class="number">2</span>,<span class="comment">// switch语句最后必须有default</span></span><br><span class="line">        <span class="string">&#x27;dot-location&#x27;</span>: <span class="number">0</span>,<span class="comment">// 对象访问符的位置，换行的时候在行首还是行尾</span></span><br><span class="line">        <span class="string">&#x27;dot-notation&#x27;</span>: [<span class="number">0</span>, &#123; <span class="string">&#x27;allowKeywords&#x27;</span>: <span class="literal">true</span>, &#125;,],<span class="comment">// 避免不必要的方括号</span></span><br><span class="line">        <span class="string">&#x27;eol-last&#x27;</span>: <span class="number">0</span>,<span class="comment">// 文件以单一的换行符结束</span></span><br><span class="line">        <span class="string">&#x27;eqeqeq&#x27;</span>: <span class="number">2</span>,<span class="comment">// 必须使用全等</span></span><br><span class="line">        <span class="string">&#x27;func-names&#x27;</span>: <span class="number">0</span>,<span class="comment">// 函数表达式必须有名字</span></span><br><span class="line">        <span class="string">&#x27;func-style&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;declaration&#x27;</span>,],<span class="comment">// 函数风格，规定只能使用函数声明/函数表达式</span></span><br><span class="line">        <span class="string">&#x27;generator-star-spacing&#x27;</span>: <span class="number">0</span>,<span class="comment">// 生成器函数*的前后空格</span></span><br><span class="line">        <span class="string">&#x27;guard-for-in&#x27;</span>: <span class="number">0</span>,<span class="comment">// for in循环要用if语句过滤</span></span><br><span class="line">        <span class="string">&#x27;handle-callback-err&#x27;</span>: <span class="number">0</span>,<span class="comment">// nodejs 处理错误</span></span><br><span class="line">        <span class="string">&#x27;id-length&#x27;</span>: <span class="number">0</span>,<span class="comment">// 变量名长度</span></span><br><span class="line">        <span class="string">&#x27;indent&#x27;</span>: [<span class="number">2</span>, <span class="number">4</span>,],<span class="comment">// 缩进风格</span></span><br><span class="line">        <span class="string">&#x27;init-declarations&#x27;</span>: <span class="number">0</span>,<span class="comment">// 声明时必须赋初值</span></span><br><span class="line">        <span class="string">&#x27;key-spacing&#x27;</span>: [<span class="number">0</span>, &#123; <span class="string">&#x27;beforeColon&#x27;</span>: <span class="literal">false</span>, <span class="string">&#x27;afterColon&#x27;</span>: <span class="literal">true</span>, &#125;,],<span class="comment">// 对象字面量中冒号的前后空格</span></span><br><span class="line">        <span class="string">&#x27;lines-around-comment&#x27;</span>: <span class="number">0</span>,<span class="comment">// 行前/行后备注</span></span><br><span class="line">        <span class="string">&#x27;max-depth&#x27;</span>: [<span class="number">0</span>, <span class="number">4</span>,],<span class="comment">// 嵌套块深度</span></span><br><span class="line">        <span class="string">&#x27;max-len&#x27;</span>: [<span class="number">0</span>, <span class="number">80</span>, <span class="number">4</span>,],<span class="comment">// 字符串最大长度</span></span><br><span class="line">        <span class="string">&#x27;max-nested-callbacks&#x27;</span>: [<span class="number">0</span>, <span class="number">2</span>,],<span class="comment">// 回调嵌套深度</span></span><br><span class="line">        <span class="string">&#x27;max-params&#x27;</span>: [<span class="number">0</span>, <span class="number">3</span>,],<span class="comment">// 函数最多只能有3个参数</span></span><br><span class="line">        <span class="string">&#x27;max-statements&#x27;</span>: [<span class="number">0</span>, <span class="number">10</span>,],<span class="comment">// 函数内最多有几个声明</span></span><br><span class="line">        <span class="string">&#x27;new-cap&#x27;</span>: <span class="number">2</span>,<span class="comment">// 函数名首行大写必须使用new方式调用，首行小写必须用不带new方式调用</span></span><br><span class="line">        <span class="string">&#x27;new-parens&#x27;</span>: <span class="number">2</span>,<span class="comment">// new时必须加小括号</span></span><br><span class="line">        <span class="string">&#x27;newline-after-var&#x27;</span>: <span class="number">2</span>,<span class="comment">// 变量声明后是否需要空一行</span></span><br><span class="line">        <span class="string">&#x27;object-curly-spacing&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 大括号内是否允许不必要的空格</span></span><br><span class="line">        <span class="string">&#x27;object-shorthand&#x27;</span>: <span class="number">0</span>,<span class="comment">// 强制对象字面量缩写语法</span></span><br><span class="line">        <span class="string">&#x27;one-var&#x27;</span>: <span class="number">0</span>,<span class="comment">// 连续声明</span></span><br><span class="line">        <span class="string">&#x27;operator-assignment&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 赋值运算符 += -=什么的</span></span><br><span class="line">        <span class="string">&#x27;operator-linebreak&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;after&#x27;</span>,],<span class="comment">// 换行时运算符在行尾还是行首</span></span><br><span class="line">        <span class="string">&#x27;padded-blocks&#x27;</span>: <span class="number">0</span>,<span class="comment">// 块语句内行首行尾是否要空行</span></span><br><span class="line">        <span class="string">&#x27;prefer-const&#x27;</span>: <span class="number">0</span>,<span class="comment">// 首选const</span></span><br><span class="line">        <span class="string">&#x27;prefer-spread&#x27;</span>: <span class="number">0</span>,<span class="comment">// 首选展开运算</span></span><br><span class="line">        <span class="string">&#x27;prefer-reflect&#x27;</span>: <span class="number">0</span>,<span class="comment">// 首选Reflect的方法</span></span><br><span class="line">        <span class="string">&#x27;quotes&#x27;</span>: [<span class="number">1</span>, <span class="string">&#x27;single&#x27;</span>,],<span class="comment">// 引号类型 `` &quot;&quot; &#x27;&#x27;</span></span><br><span class="line">        <span class="string">&#x27;quote-props&#x27;</span>:[<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 对象字面量中的属性名是否强制双引号</span></span><br><span class="line">        <span class="string">&#x27;radix&#x27;</span>: <span class="number">2</span>,<span class="comment">// parseInt必须指定第二个参数</span></span><br><span class="line">        <span class="string">&#x27;id-match&#x27;</span>: <span class="number">0</span>,<span class="comment">// 命名检测</span></span><br><span class="line">        <span class="string">&#x27;require-yield&#x27;</span>: <span class="number">0</span>,<span class="comment">// 生成器函数必须有yield</span></span><br><span class="line">        <span class="string">&#x27;semi&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 语句强制分号结尾</span></span><br><span class="line">        <span class="string">&#x27;semi-spacing&#x27;</span>: [<span class="number">0</span>, &#123;<span class="string">&#x27;before&#x27;</span>: <span class="literal">false</span>, <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span>,&#125;,],<span class="comment">// 分号前后空格</span></span><br><span class="line">        <span class="string">&#x27;sort-vars&#x27;</span>: <span class="number">0</span>,<span class="comment">// 变量声明时排序</span></span><br><span class="line">        <span class="string">&#x27;space-after-keywords&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 关键字后面是否要空一格</span></span><br><span class="line">        <span class="string">&#x27;space-before-blocks&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 不以新行开始的块&#123;前面要不要有空格</span></span><br><span class="line">        <span class="string">&#x27;space-before-function-paren&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;always&#x27;</span>,],<span class="comment">// 函数定义时括号前面要不要有空格</span></span><br><span class="line">        <span class="string">&#x27;space-in-parens&#x27;</span>: [<span class="number">0</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 小括号里面要不要有空格</span></span><br><span class="line">        <span class="string">&#x27;space-infix-ops&#x27;</span>: <span class="number">0</span>,<span class="comment">// 中缀操作符周围要不要有空格</span></span><br><span class="line">        <span class="string">&#x27;keyword-spacing&#x27;</span>: <span class="number">2</span>,<span class="comment">// return throw case后面要不要加空格</span></span><br><span class="line">        <span class="string">&#x27;space-unary-ops&#x27;</span>: [<span class="number">0</span>, &#123; <span class="string">&#x27;words&#x27;</span>: <span class="literal">true</span>, <span class="string">&#x27;nonwords&#x27;</span>: <span class="literal">false</span>, &#125;,],<span class="comment">// 一元运算符的前/后要不要加空格</span></span><br><span class="line">        <span class="string">&#x27;spaced-comment&#x27;</span>:  [<span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;always&#x27;</span>, &#123; <span class="string">&#x27;markers&#x27;</span>: [<span class="string">&#x27;/&#x27;</span>,], &#125;,],<span class="comment">// 注释风格要不要有空格什么的</span></span><br><span class="line">        <span class="string">&#x27;strict&#x27;</span>: <span class="number">2</span>,<span class="comment">// 使用严格模式</span></span><br><span class="line">        <span class="string">&#x27;use-isnan&#x27;</span>: <span class="number">2</span>,<span class="comment">// 禁止比较时使用NaN，只能用isNaN()</span></span><br><span class="line">        <span class="string">&#x27;valid-jsdoc&#x27;</span>: <span class="number">0</span>,<span class="comment">// jsdoc规则</span></span><br><span class="line">        <span class="string">&#x27;valid-typeof&#x27;</span>: <span class="number">2</span>,<span class="comment">// 必须使用合法的typeof的值</span></span><br><span class="line">        <span class="string">&#x27;vars-on-top&#x27;</span>: <span class="number">2</span>,<span class="comment">// var必须放在作用域顶部</span></span><br><span class="line">        <span class="string">&#x27;wrap-iife&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;inside&#x27;</span>,],<span class="comment">// 立即执行函数表达式的小括号风格</span></span><br><span class="line">        <span class="string">&#x27;wrap-regex&#x27;</span>: <span class="number">0</span>,<span class="comment">// 正则表达式字面量用小括号包起来</span></span><br><span class="line">        <span class="string">&#x27;yoda&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>,],<span class="comment">// 禁止尤达条件</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="vscode配置"><a href="#vscode配置" class="headerlink" title="vscode配置"></a>vscode配置</h3><h4 id="在vscode中安装eslint插件"><a href="#在vscode中安装eslint插件" class="headerlink" title="在vscode中安装eslint插件"></a>在vscode中安装eslint插件</h4><img src="/2022/01/05/vscode-eslint/WX20220105-131023@2x.png" class=""><p>然后打开vscode用户的setting.json（首选项-设置-随便找一个下方有<code>在 setting.json 中编辑</code>的按钮点开）<br>在下面添加<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;eslint.enable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;eslint.run&quot;</span>: <span class="string">&quot;onType&quot;</span>,</span><br><span class="line"><span class="string">&quot;eslint.options&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;overrideConfigFile&quot;</span>: <span class="string">&quot;/Users/luobin/vscode-eslint/.eslintrc.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;extensions&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;.vue&quot;</span>,</span><br><span class="line">    <span class="string">&quot;.ts&quot;</span>,</span><br><span class="line">    <span class="string">&quot;.html&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;eslint.validate&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">  <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typescript&quot;</span>,</span><br><span class="line">  <span class="string">&quot;html&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="string">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;source.fixAll.eslint&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;eslint.alwaysShowStatus&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;eslint.format.enable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;eslint.probe&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typescript&quot;</span>,</span><br><span class="line">  <span class="string">&quot;typescriptreact&quot;</span>,</span><br><span class="line">  <span class="string">&quot;html&quot;</span>,</span><br><span class="line">  <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">  <span class="string">&quot;markdown&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="string">&quot;eslint.lintTask.enable&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;eslint.onIgnoredFiles&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line"><span class="string">&quot;eslint.packageManager&quot;</span>: <span class="string">&quot;yarn&quot;</span>,</span><br></pre></td></tr></table></figure><br>这里主要的几个选项我做了注释，可以其余可根据需要添加或省略。（我这里使用的vscode版本和eslint版本可能和你的不一致，格式化或者保存项目文件的时候，输出中会提示哪个属性已经被废弃，哪个属性被替换成其他写法，根据提示修改既可以，前提是你开启了eslint.alwaysShowStatus）</p><h4 id="vscode中配置默认格式化"><a href="#vscode中配置默认格式化" class="headerlink" title="vscode中配置默认格式化"></a>vscode中配置默认格式化</h4><p>随便找一个文件，右击选择<code>使用...格式化</code>，最下面会出现一个<code>配置默认格式化程序</code>,选择<code>ESLint</code>即可。</p><h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3><p>vscode的eslint插件不能脱离依赖使用，所以必须找一个安装有eslint及其需要的插件的项目来使用其中的依赖，这里我们新建了一个空项目，然后在vscode中将eslint插件的全局依赖和配置选择到我们建的空项目中，这样eslint插件就可以完美运行了。<br>此方法相当于给eslint插件一个全局的规则，如果项目中安装有eslint，并且有规则，还是会按照项目中的规则进行格式化和代码提示的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;eslint可以在模块化开发的项目中对代码进行提示和格式化，也可以配合vscode的eslint插件进行提示和格式化。&lt;br&gt;那在非模块化的项目中如何达到同样效果呢？比如只有一个index.html和index.js的普通网页中。&lt;br&gt;如图&lt;/p&gt;
&lt;p&gt;&lt;video s
      
    
    </summary>
    
      <category term="vscode" scheme="https://hakunamatata052.github.io/categories/vscode/"/>
    
    
      <category term="eslint" scheme="https://hakunamatata052.github.io/tags/eslint/"/>
    
      <category term="vscode" scheme="https://hakunamatata052.github.io/tags/vscode/"/>
    
  </entry>
  
  <entry>
    <title>threeJs模型压缩、加载</title>
    <link href="https://hakunamatata052.github.io/2021/11/01/threejs-compress/"/>
    <id>https://hakunamatata052.github.io/2021/11/01/threejs-compress/</id>
    <published>2021-11-01T04:00:00.000Z</published>
    <updated>2022-01-05T07:51:52.064Z</updated>
    
    <content type="html"><![CDATA[<h1 id="压缩模型"><a href="#压缩模型" class="headerlink" title="压缩模型"></a>压缩模型</h1><h2 id="安装压缩器"><a href="#安装压缩器" class="headerlink" title="安装压缩器"></a>安装压缩器</h2><p>全局安装gltf-pipeline<br>git地址：<code>https://gitee.com/apis-cloud/gltf-pipeline.git</code><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g gltf-pipeline</span><br></pre></td></tr></table></figure></p><h3 id="转换格式"><a href="#转换格式" class="headerlink" title="转换格式"></a>转换格式</h3><p>如果是glb或fbx格式，首选需要转换格式glft，这个插件是自带格式转换的<br>在模型所在文件夹执行命令<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gltf-pipeline -i model.glb -j</span><br></pre></td></tr></table></figure></p><h3 id="执行压缩"><a href="#执行压缩" class="headerlink" title="执行压缩"></a>执行压缩</h3><p>再执行压缩操作（model.gltf是转换格式后的文件名，modelDraco.gltf是压缩后的文件名）<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gltf-pipeline -i model.gltf -o modelDraco.gltf -d -s</span><br></pre></td></tr></table></figure><br>压缩后得到两个文件</p><ul><li>modelDraco.gltf</li><li>modelDraco.bin</li></ul><p>将两个文件放在DRACOLoader指定的文件夹即可</p><h1 id="导入模型"><a href="#导入模型" class="headerlink" title="导入模型"></a>导入模型</h1><p>最后使用DRACOLoader加载器加载压缩模型即可<br><a href="/images/draco.zip">点击下载</a>WASM/JS解码库文件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loader = <span class="keyword">new</span> GLTFLoader() <span class="comment">//创建模型加载器对象</span></span><br><span class="line"><span class="keyword">var</span> dracoloader = <span class="keyword">new</span> DRACOLoader() <span class="comment">//draco加载器(压缩模型解码器) </span></span><br><span class="line">dracoloader.setDecoderPath( <span class="string">&#x27;stl/&#x27;</span> ) <span class="comment">//指定包含WASM / JS解码库的文件夹的路径。</span></span><br><span class="line">loader.setDRACOLoader( dracoloader ) </span><br><span class="line">loader.load(<span class="string">&quot;stl/modelDraco.gltf&quot;</span>, <span class="function"><span class="params">gltf</span> =&gt;</span> &#123;</span><br><span class="line">    gltf.scene.scale.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">    gltf.scene.position.set(<span class="number">0</span>, -<span class="number">0.2</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">this</span>.scene.add(gltf.scene)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;压缩模型&quot;&gt;&lt;a href=&quot;#压缩模型&quot; class=&quot;headerlink&quot; title=&quot;压缩模型&quot;&gt;&lt;/a&gt;压缩模型&lt;/h1&gt;&lt;h2 id=&quot;安装压缩器&quot;&gt;&lt;a href=&quot;#安装压缩器&quot; class=&quot;headerlink&quot; title=&quot;安装压缩器&quot;&gt;
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/categories/JS/three-js/"/>
    
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/tags/three-js/"/>
    
      <category term="threejs" scheme="https://hakunamatata052.github.io/tags/threejs/"/>
    
      <category term="three" scheme="https://hakunamatata052.github.io/tags/three/"/>
    
  </entry>
  
  <entry>
    <title>封装微信小程序请求</title>
    <link href="https://hakunamatata052.github.io/2021/05/07/requset/"/>
    <id>https://hakunamatata052.github.io/2021/05/07/requset/</id>
    <published>2021-05-07T02:05:00.000Z</published>
    <updated>2022-04-21T06:41:12.779Z</updated>
    
    <content type="html"><![CDATA[<h1 id="登录流程"><a href="#登录流程" class="headerlink" title="登录流程"></a>登录流程</h1><p>首先看下小程序官方的登录流程图<br><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/api-login.2fcc9f35.jpg" alt="登录流程图"><br>大致的登录流程是这样的：</p><ul><li>前端：小程序请求是先使用<code>wx.checkSession</code>验证小程序服务器登录态是否失效，如果失效，则使用<code>wx.login</code>进行登录，然后获取到code发送给业务服务器。<ul><li>后端：业务服务器拿到code后请求小程序服务器获取用户的openid等信息。</li><li>后端：业务服务器使用openid去匹配服务器中用户的数据，如果openid存在，说明用户已注册，如果不存在，则直接注册一个用户，并将openid保存在数据库以便下次验证。<ul><li>后端：如果用户已注册，后端直接执行登录操作，即返回用户的业务登录态（token），也可以加上需要的用户信息等。</li><li>前端：拿到业务端的登录态后，再次携带登录态访问业务端接口。</li><li>后端：验证用户登录态是否有效，有效则返回业务接口数据。</li><li>后端：无效则返回登录态失效信息。</li><li>前端：如果请求返回的是登录态失效，则再次使用<code>wx.login</code>拿到code请求业务端登录接口，获取业务的登录态。</li></ul></li></ul></li><li>前端：如果验证小程序登录态没有失效，则前端直接请求业务端接口（请求中携带业务端登录态，即业务的token）。<ul><li>后端：验证用户登录态是否有效，有效则返回业务接口数据。</li><li>后端：无效则返回登录态失效信息。</li><li>前端：如果请求返回的是登录态失效，则再次使用<code>wx.login</code>拿到code请求业务端登录接口，获取业务的登录态。<br>大致的前后端流程就是这样。</li></ul></li></ul><p>然后需要将上面的流程中的前端请求封装一下。<br>调用的时候直接使用：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http(route, data, config).then(res=&#123;&#125;).catch=(<span class="function"><span class="params">err</span>=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure><br>config暂时没有写配置，可以自定义一下，如请求方式（get，post…），还有是否弹出错误提示和正确提示，是否显示加载等。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">&#x27;./config&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;RootObject&#125; <span class="keyword">from</span> <span class="string">&#x27;../model/rootObject&#x27;</span></span><br><span class="line">interface option &#123;</span><br><span class="line">  method?: <span class="string">&#x27;OPTIONS&#x27;</span> | <span class="string">&#x27;GET&#x27;</span> | <span class="string">&#x27;HEAD&#x27;</span> | <span class="string">&#x27;POST&#x27;</span> | <span class="string">&#x27;PUT&#x27;</span> | <span class="string">&#x27;DELETE&#x27;</span> | <span class="string">&#x27;TRACE&#x27;</span> | <span class="string">&#x27;CONNECT&#x27;</span> | <span class="literal">undefined</span></span><br><span class="line">  errAlert?: boolean | <span class="string">&#x27;toast&#x27;</span></span><br><span class="line">  resAlert?: boolean | <span class="string">&#x27;toast&#x27;</span></span><br><span class="line">  loading?: boolean</span><br><span class="line">  maxRefresh?:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Http</span> </span>&#123;</span><br><span class="line">    <span class="attr">route</span>:string</span><br><span class="line">    <span class="attr">options</span>:option</span><br><span class="line">    <span class="attr">data</span>:unknown</span><br><span class="line">    <span class="attr">refresh</span>:number <span class="comment">// 当前熔断次数</span></span><br><span class="line">    <span class="attr">maxRefresh</span>:number <span class="comment">// 最大熔断次数</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.route = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">this</span>.data = &#123;&#125;</span><br><span class="line">        <span class="built_in">this</span>.refresh = <span class="number">0</span></span><br><span class="line">        <span class="built_in">this</span>.options = &#123;</span><br><span class="line">            <span class="string">&#x27;method&#x27;</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;errAlert&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;resAlert&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&#x27;loading&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;maxRefresh&#x27;</span>: <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.maxRefresh = &lt;number&gt; <span class="built_in">this</span>.options.maxRefresh</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> request(route:string, <span class="attr">data</span>:unknown = &#123;&#125;, options?:option):<span class="built_in">Promise</span>&lt;RootObject&lt;unknown&gt;&gt;&#123;</span><br><span class="line">        <span class="built_in">this</span>.route = route</span><br><span class="line">        <span class="built_in">this</span>.data = data</span><br><span class="line">        <span class="built_in">this</span>.options = &#123;</span><br><span class="line">            <span class="string">&#x27;method&#x27;</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;errAlert&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;resAlert&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&#x27;loading&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;maxRefresh&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">            ...options</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.maxRefresh = &lt;number&gt; <span class="built_in">this</span>.options.maxRefresh</span><br><span class="line">        <span class="built_in">this</span>.showLoading()</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">await</span> <span class="built_in">this</span>.checkSession()) &#123;</span><br><span class="line">            <span class="keyword">const</span> loginStatus = <span class="keyword">await</span> <span class="built_in">this</span>.login()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!loginStatus)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.refresh &gt;= <span class="built_in">this</span>.maxRefresh)&#123;</span><br><span class="line">                    <span class="built_in">this</span>.hideLoading()</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;登录态获取失败&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">await</span> <span class="built_in">this</span>.sleep(<span class="number">500</span>)</span><br><span class="line">                <span class="built_in">this</span>.refresh++</span><br><span class="line">                <span class="keyword">await</span> <span class="built_in">this</span>.request(<span class="built_in">this</span>.route, <span class="built_in">this</span>.data, <span class="built_in">this</span>.options)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.HttpClient()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (res?.code === <span class="number">500</span>) &#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="built_in">this</span>.login()</span><br><span class="line">            res = <span class="keyword">await</span> <span class="built_in">this</span>.HttpClient()</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.hideLoading()</span><br><span class="line">        <span class="keyword">if</span> (res?.code === <span class="number">200</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.successToast(<span class="string">&#x27;resAlert&#x27;</span>, res.msg)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.successToast(<span class="string">&#x27;errAlert&#x27;</span>, res.msg || <span class="string">&#x27;服务器故障&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(res)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> HttpClient():<span class="built_in">Promise</span>&lt;RootObject&lt;unknown&gt;&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">            wx.request(&#123;</span><br><span class="line">                <span class="string">&#x27;url&#x27;</span>: config.api + <span class="built_in">this</span>.route,</span><br><span class="line">                <span class="string">&#x27;data&#x27;</span>: &#123;</span><br><span class="line">                    ...&lt;object&gt; <span class="built_in">this</span>.data</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;method&#x27;</span>: <span class="built_in">this</span>.options &amp;&amp; <span class="built_in">this</span>.options.method || <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;header&#x27;</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;token&#x27;</span>: wx.getStorageSync(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;success&#x27;</span>: <span class="function">(<span class="params">res</span>)=&gt;</span> &#123;</span><br><span class="line">                    resolve(&lt;RootObject&lt;any&gt;&gt;res.data)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;fail&#x27;</span>: <span class="function">(<span class="params">err</span>)=&gt;</span> &#123;</span><br><span class="line">                    reject(err)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 检测登录态  返回true不需要重新登录 返回false需要重新登录</span></span><br><span class="line">    checkSession():<span class="built_in">Promise</span>&lt;boolean&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            wx.checkSession(&#123;</span><br><span class="line">                <span class="string">&#x27;success&#x27;</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> token = wx.getStorageSync(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">                        resolve(<span class="literal">false</span>)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        resolve(<span class="literal">true</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;fail&#x27;</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    resolve(<span class="literal">true</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="keyword">async</span> login():<span class="built_in">Promise</span>&lt;boolean&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            wx.login(&#123;</span><br><span class="line">                <span class="string">&#x27;success&#x27;</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    wx.request(&#123;</span><br><span class="line">                        <span class="string">&#x27;url&#x27;</span>: config.api + <span class="string">&#x27;wxlogin&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;data&#x27;</span>: &#123;</span><br><span class="line">                            <span class="string">&#x27;code&#x27;</span>: res.code</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="string">&#x27;method&#x27;</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;header&#x27;</span>: &#123;</span><br><span class="line">                            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="string">&#x27;success&#x27;</span>: <span class="function">(<span class="params">loginRes</span>)=&gt;</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loginRes.statusCode === <span class="number">200</span>)&#123;</span><br><span class="line">                                resolve(<span class="literal">true</span>)</span><br><span class="line">                                wx.setStorageSync(<span class="string">&#x27;token&#x27;</span>, (loginRes.data <span class="keyword">as</span> RootObject&lt;any&gt;).data.token)</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                resolve(<span class="literal">false</span>)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="string">&#x27;fail&#x27;</span>: <span class="function">()=&gt;</span> &#123;</span><br><span class="line">                            resolve(<span class="literal">false</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    sleep(time:number):<span class="built_in">Promise</span>&lt;<span class="keyword">void</span>&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                resolve()</span><br><span class="line">            &#125;, time)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">showLoading</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.options.loading)&#123;</span><br><span class="line">            wx.showLoading(&#123;</span><br><span class="line">                <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">hideLoading</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.options.loading)&#123;</span><br><span class="line">            wx.hideLoading()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">successToast</span>(<span class="params">type:<span class="string">&#x27;resAlert&#x27;</span>|<span class="string">&#x27;errAlert&#x27;</span>, content:string, title = <span class="string">&#x27;提示&#x27;</span>, confirm?:<span class="built_in">Function</span>, cancel?:<span class="built_in">Function</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span>.options[type] === <span class="string">&#x27;boolean&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.options[type])&#123;</span><br><span class="line">                wx.showModal(&#123;</span><br><span class="line">                    <span class="string">&#x27;title&#x27;</span>: title,</span><br><span class="line">                    <span class="string">&#x27;content&#x27;</span>: content,</span><br><span class="line">                    <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (res.confirm) &#123;</span><br><span class="line">                            confirm &amp;&amp; confirm()</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.cancel) &#123;</span><br><span class="line">                            cancel &amp;&amp; cancel()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.options[type] === <span class="string">&#x27;toast&#x27;</span>)&#123;</span><br><span class="line">            wx.showToast(&#123;</span><br><span class="line">                <span class="string">&#x27;title&#x27;</span>: content,</span><br><span class="line">                <span class="string">&#x27;icon&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;duration&#x27;</span>: <span class="number">2000</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Http()</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;登录流程&quot;&gt;&lt;a href=&quot;#登录流程&quot; class=&quot;headerlink&quot; title=&quot;登录流程&quot;&gt;&lt;/a&gt;登录流程&lt;/h1&gt;&lt;p&gt;首先看下小程序官方的登录流程图&lt;br&gt;&lt;img src=&quot;https://res.wx.qq.com/wxdoc/dist/
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="小程序" scheme="https://hakunamatata052.github.io/categories/JS/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="微信小程序" scheme="https://hakunamatata052.github.io/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="请求封装" scheme="https://hakunamatata052.github.io/tags/%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>ACT常用开发套路</title>
    <link href="https://hakunamatata052.github.io/2021/04/16/ulink/"/>
    <id>https://hakunamatata052.github.io/2021/04/16/ulink/</id>
    <published>2021-04-16T06:13:00.000Z</published>
    <updated>2021-04-16T07:16:57.669Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="6f5d750ca378f0b8b8e86e3e55f3c0fb478f61d1d44dee6aeb20e9f30a2ddd35">1a025ead7a8c78ef8c16dfac148f767a2a97cf95de574d59133935e779f2b8623b264d897941efc83f35e6cb20adc3eeae9c6ddc0c41c92d928723e068361ee8ccbabf805fbb387a227bee78b70dcc3f1d5ece8e78747210a8d09a05e60db14a8d8f6a3b7cdb11e211d91f83012cc56d7669b27f3476871a537d61e3d62b89eab1953a65d40a5ba3d04bed7a44b60dbf78d3da38b5dc7326a40a64153a70b13cd419d80bb1ecc1d69ef5955b635664bd1da3cffb6dfa25122bdde2edfbc8a1c18d6fa37a127116610f0d1c2d2e90a687b55b82aa533353ee4dac883ff471f7bde10b9c86d88d48853d08cf97e172bfaa156fe720980ffe02202fb3e593060828b87dc76813203fc84555573bba2a9edd1180879d060ee19772d21229c00b3968857d552d01747c4cc113e46024102ed62ed6cbab3ea6f7791834050628fa39e8d2740621fc94871cd43b65f54c31d45c01b2161bc18ea1c06856cfae4b0c8b4e89e0fcf52bbf70036fcd835a5314e2a6a0e7e57e9bc0b949030eda4162c0595839744b2d01b129f2dc5c82c97e1a2367c2b02905e6a27f0196301cfd732ce32d9d354c534668774e1f074ba6b42d4c0118b6852a23f823f0d01e3d980d61aaa3ba117a4e81b3a434f6f362881678f8fad6e096d48e288646015d7e9c1331f30fd07b26fbd8b64e7a3c2c303f16d31d187e6433c958663cd41fb74236929ef0186cedaea2d9a3955dd99c87ab9b280e6842cae7506908bdd6efc71cf2d2a09d4603726e45dac333a0b6f8567b198a9293c063b8e79b6cede88f56ec9dccb112f472fb40e1b8601819c2e62a48b921354fadc8014ddef96aea5d241d80e8de56462aafd4f9da46165ebef566aa98e7a7ac39496879aa39b1be4c3728f034f5cd881694ddb5c4116795860d8f016a66bbbd71adfad31b87d6597d5c5eb6f9580fe0ae5366bc52b62721186fddbb80bb2cd56a0b121713cf4d88824e19a1da15ebc88f054c2961d889982c24667cf0dad7271e0018c7e1d23a22c5178e5e6503de364d91f78f9a1cadf3ed7bd6d824c95733ecc26f67e7cf3eea0b475b053c9c2af6e468b495fcfed3c534259c64ec6ab594451fc450931a47ee4d51b8ad247e977ebb458bec1c052b3d94e87f32b2a1f994324efdf3726291b0c6cbb9332bfcd342518a38e85ed9f9d2b71da861fe3e16f11dc34730d89004bea0170a70cf2bdc6a67e8f87aa7d003158ee844269d892f02d00d2892ec5eb5b3840d06b7702a04d599ffbffb92d3e47ecc6e4cdf6751f98b98cc28215c421c66b04730c80fda7f7684dbbcb85fff4303c0ea92ca822f78083531b260b2fdcfcf40eae3d2b71a2de1cd3219e627c094f57929cda5b62d155b2bc43e262315faed5cf497f7d9f08c998023e00e35fd8f6a7ea3dbfc01d8b1febbc629afc8260b7f995a988681c4ab212a687b6b92a20d7c741b4099dbd21cacba039224078b72074e31d692503149cdae2974da6d0ded3eebbccf504dbfd139d313e4c8e1a29b78d430bfc3db8503474154a32c61305372719a4f67a9247fcf25cbc6a373902f0a320523aff818c179e3fcfe157ed1f11dd6464a4d2c76de86450529dc53b6cd9c8a7103a4229cbf8be12e5c99fb2dc126c955dd2d14037c6d023de11fca7da21d632d4e7e5fe400227318aee93d085c475437b038c804ac420f46afcc2e1986cec4fccb1fb425998c37b8f94c3fa37b92a10a84e039acd2a99e8d56d67749759ccfe0be7df8bbcb04751d5045cd97f9b012f15f198cf16f5edce71ffe3fef1eebadacef8055e25632724f734a43f8b856bc984331b4a6c637b14edd437ee810ececc1480a296d0735d285a8d9fa9f6c6e747ce5a6f4a5e4f8e080ecf842fbbd0c5323fcad1774396366f18d98b4cd47ef64c17cf074ee816d3aea9dd5f24299541d91163cafda1b3e0cdbcac1ab76d9a9b92d393b1d9d05ebbfe43b32270552babe9916d41f5d5052c5b808e507deffecb8288fb681e0185ed3e0ec2eba3cfd2289c30e06c302e62f51555933f0e5dd560a5771b1c4104d139eea9a37a0dc7e92da7214cf789a85cc9de7aae6079cfb78170f4d0913d46e0b192046660288842cac0a97c7a337337db6cdee097232daa8299f334b411278b08fe8779f0a0929fac6f2e0bdcf1e736150e07b574f5ab842e05b6fc717ad7d396d66f26557eedd7afe451fc6c6733458f9034e9fa988f4471dbaec1537b098bab6de709446d31e82c86043e8e22a620ac076d47aa7d91ade87535d9db20c799d744d5e28c3cfede27c917824ddc2595c8fdddba6920ba6249e5cd39ad6643bbb1c188693c43fb0eac750e7792b50d2a98924e4fe9ab380e7f51bb88f5cd4ddce1d7d8be74cf76ca0fa2e9ee1f4f6fb2331f036bdba50421507ca3fd2970464d40ee340de16d0d3d35f3badea96e167de667b276d7480ee4da12437ff5a586f2920096b0425399efe045f3300daff7c805c27b9caabf07c444377085e1e87d718fe6578a9475edf255266c45566eee7da01358b5ef3e63979597e9de8a7e3c3280e31d1274f6687385c7bb8358aecf1f256651d9e2ff487fb3d2a3145faed4ddfe4818e9f892046418ba50178edbdf447a699fe170c27515eb09b005d14a25be92956b3bf5a2d642daf09be267dc956232ad613bda2148da30044dfd8d2fd90986dc09b791b25fe83f3f85b525623efa97e52093d462397763fb842c3e19f5c68550c2d81da44163591fdda221054a1c634d9aecc13360aa2c1b8e9562e10ef5c80fb8d68e012858fad91d43b281e73dae60cb572219b90e48a153aff6e0ad56cb87d55f9a0c9f2492f05898ac74c7733bbad0998e0b0a89033d0f05d239895ca7fa71ee7f07138e7c409870091589e19937395ec7f773b41bf501ed503955ae2310ee7b69e4e7415e7c48e405699592192b996867fa640aa62575bf10123ad7631b6f0c0f790cee7990b11872068a9af2dfca943402642faa164ef1184630427a61763f611580f132af2a564b452917a652cb9f014c2a19c2496c72c4f8567e6508adc196ac93b4cb23a9033a7adec35bacde8c278c0e56ad40e335b4164279e68c13c2b173e805b95caf7b8233aa16377cb4138786ada4b24281acacd31d0c009d69e6ec70207a56800689ce8a57993564047df365f58f342894898e95e9a7ecee100b733897a58e26db4d36e8e642a194e505be9adc25b503b485f8dcce20a06bac3e8fd18abb700475c181d9f66871efb05a57641637172f155165ae283aac92f605f6544e16df273c931897fd3862158d4899cdcb7118f2dcbf975c8a47b4ba4bc5dbf71ce301c1696b25bd9baa11dcb3cc794d04b55d5277fc615c53afbb80839437512bb2b027fde50e2c6848344df1ce4f0b454026bed254fac79dc8cf0e207265c8f242214bad4f537dc0b65f95389c30a9e8d1831239e19b9068fae7c87d38e1b4e859877b63a08bef6053adb887671c136b168e51a3fae21daa195fd0b788a9a127febaccea0032c83b8dfd87a58f2835bd80c8b2a59f524722386572c8dc52208aaffa83314ed99d362ed5cbda9234b05a2d6d287d3c1ae88c8bc701060850f04d9d64407733f70820578740033bd5b4c8e8e48ead00932137dacd9cdabb59f9fcbf6625323b3bd7414686d4259c915ebab4ced31504ef36b8d3ba9a11b5cc09975ee7a5b65c0b615c3162be75b1dc23b1beaaa1d97c6175a89b19ec23d7c88e6ec036669fa7d70be872607d9eda9c01109390aa3224df0a223c44c46d534b68ce638067304deca24d88b83d21106c7d263362e71b87f702dcebf02d6f15cfeade3eaceda88aa14184f8c86a1928bfeb2edc8b98e0ebbc7a31c9d7f7de653900842e0b703cf83895c09ccf2ed639064957b17ecc5faccc79ec50c29b7f78727a740dee28575201f845c552ab12093edb54e011b0e7fd81146b6ea74080eb516d51dc121ba1d813516dfef077ecde38df5ac7e33712792f794ca5e65b6552f1b536b4541ba0b28eae06b4f95acf2743cd78906fe67c0724a53578e61f115dc3bc6485147c8523a34f1fea7a69c882ef0a26fe6c453c32c6f59e5c20392a0c6bc8110c079833e2f8848c600ffc92e74c3ff560b2e4decbd5934fccc5062297be6914f9e37f0a1415bc38acbfaa4f90975ab82ca18df468f9f611f7dd01b32e7e17c8cfe59ddafdf52f0ca113c73069338c47b51693fa3c5fbac9e2337bf4a6d676adb4bc81c5c93dfebbb60951041fd1cc086c68be5f7276c43b7f128725e4e0e2e626865a0345c01b8bf18471ce1a4c4a6259ff5e4ab21d844155abe1ed7704f4cc609afe3a20a1fe6a5fb4cb7d8e5f72704efa13b25bd59524511e13da8fd762c162fda423b5d2c86fb5cb20a0bc41130e9731b611114d8c08a2588dc9f49a4c1b4d7df9d1d5789677ee56ff68d60a328f2f7a21822e2cddc6ef808f3694bc26032e184572527f3f780483e506871480df1cd83d5120286bbb4c6ad5b349f415cf9f060e72900549f3336a8f844180b78d8fac95287f44cf39fc3086b26d519f1d113894eaa5c5a81efee97da3b31601b6b4a61affbe3f786359b35f4250c804311b8740666c6384363f9c7f5a0f465bedd52629414d05e7f5e90fbabd8abe24fa51895b5e245769358b76b0e073bffc401e61e06c1fafa772a8609568f842c82a11e27880fbf376d24ae0c3fe629cd01d2ef56792509b4cc7431d0265d9e7cc11d0fec74f337e8f0fd6db0b27fe3d15934c6ec1dc843627bc3a93f03408cf859dd8f053d63f7b8a0b524e798f445dba38c356ab7c4f3c42acd3a3682e64138add1f953a85b9dcdb8025df3c206f50a36457c46cc6943e0c06fcd9355d1a1e320c25948b0fe4614abb4c5cc11d3abd967614cc2f25332774d06625aaa640af1e3d474356cf093cd3f349c1aad487f72cec241a0a9cd0076a5f45e09e5e4a74ffdd752861ebbff80f9d5054cdc7c6a4508ad33ff4dd34465742a75b896306a3ac1c0f2d6dcd8ac045013cf3d4f2ee440d045d5c5d9bf92e99591dee3993888d63b43fb95b952b13da782ee55259bf1c607b34b49d653ef38664c833b73d3f7bb5e5201a2c56b84437e227b7c67d7153c841d7c7e706b953e3b5936206a5b8e7c521670f5d51266a986c7d2b14c6642fd57e07ec3281b30ef7910b21ba3287610886371312c0e644165e417861f292b7288bae6ecfff295a70cbde9adf73861095ca36df72ad52a57b465371b107814e59cf93dd98f80ba6977ed2d0b8588c5321d35f8d533af145b1f889ac36148b10cc22e6355868cad3abc84ff03b425983c24ca9d8f8aa84f3c2731af5cbfc916953b57efa86d03c157212625d86c53cafafc4742d24aec455f3b7adbaa664afd9df59c2909f39079c0d90a4b818af9e02b8a0b9f90d2c712dfb495159d43f40b14587683146c8d94578bd0180ed4e4912f59643098ded106f9cc02769b9bdeed53792669575611b2519ad5711591d9e23701f8b2fdaf9eec1e0e22692bc60b797016dd506abcec0775b988be9b28c8cebea4b3bce86292ab133a09c5a777ee8de23481b54da02ab6de53366ae599e2bca4b7790359618cc9709878edba219a6aca24936490f79a019c75681372b7c702cbc9e5ada91ae00510be09e0a013fd2537e48f192939d2f85b456f2333e7d45a00b802303e4f83d21a893540d7fcef1e00197759b26762e83433cb91e547aaec3dfad65af602f3d412660b3e2783a86ce74f1403f9e0b7063b60619edcdbf1b86fafb853c5233e10253710d843916db353a0bb4b52d582b9ba6a9c5b40aafd56373226962d2cfab85ee1ba45a3ffa2b0106a6fb81b453043340a4097e4a5737b5915d1315a4f1057c69a1a25b78f93c3fd283be262506282b3010c9cc94147460a8f64467d7f093a527c8309ad69dd3a3e640c25c6399c7da812b2729075a10c3525b12bed2bcfc0ffecce73f168088e6385a26b5bbbd3b757e26f6d1a3687c530957e0a5648d71af685d62da5961beb0396a87b43c9979c4040a04ce622e8c7bd5bac28af633d7c83abf573fd4fdacbd6d928841de411882118700f57d5d8d56c190689e9181a63c16c8e27718e304c277c68d9f8328cb4e87a7e5033093400e91b4c6310b2b9bc8ce8da2bdd40d09f39d4ff6acfbd0368b78a8695d0a022b9db1dc5a252fcbe691597776734820bbb6635852a71360d109925ecac6e57804a992ea6f9e9086a15561ddfb2eae4febb0005e0311614057c7134da086aa1380ca968724276f857ba1295730ca9293fef0dd5dde354093ddb541f4b2d1c71ce70f0631cba7800a42fbf730abf25748eba0980107ac5272d27c4641e8fd98a9f55f400c8c2f0b888fccfc65a9967fffedc49116be6b88fbc90ae45469c3c19c569f3ec3c724a3de830fce1bc8966f9f6405e76f53abd7cb0ed31c8cdea097550b33de7f062c3153b6f8cc5477a6800540028ceac0678b94d18f3543ef8d5d095fc749a19498c44149e11db6d6248e38bfb573abc5230696ce451e33de51bb2c54fcecd77a6b6c534d14ee9def5f555dd1578f495acfb84629fa7fdb305e50ae6dd7166a462cc76f96e74d5706e45c2952f3d5d02f50b5b5c6056513cc18bf540ed5c12a8c22d8578e567c16cc482ca977f9c88739ccc837aa48b35d97247cea2d8e076cdcbd7f6eb0d4ed3b66f4df2ce70e8c4f8faaabdce5ba49c4d7f0554398b565ad0f1fb30759cabbd01f07b1ff44a0722f5ea4164537e8c8bfc789c00ce299891ad73015e005fb393cc9c6715062f79d5c871f49a291b4d9addfce8dd874c6f37fb7ea67706f7a3c9999e95bfec3aa24d46c561d4d2c5a137a22e5509bdc741b4e666a19895525af311f6853010ba2ba5b3d3cb0aeeaa25563d5dc23dc755dfa6109ea672ba68cb5040539680c195b1c93b47ce54e1fe18c75075df0983ffd7cfb7d7a492320597da476e5d06d532c98362af561ee81c63f75b7635acbbc0a45f6a4bcfbf61fe588e470d7b92d092abcf77fd47209f654216ae09be7acae6a6df5f98e8e264c63db6cebaf59dd4460a24b843cae6a2725ff81ab97f34a86b50062608820d8ff24ccd4b5e1ce1eac698aebfc4e76fdae67711bac2433c4b63dce5fbdf12be9fcd1b7296d32c7b70f61166007aac08f57df410bd320ea2fbd446db79afc67486e05f38592591b8865914fcf384ebbf0560a5b5ad3f72868602aae67e44c1273aa8a491e500e5951a5ac9d72ef43b3ef1850fe4beb975945b111d58e8be0ee5049631156feb9e297d2d98116c911dc90eb8731ca4e1514c1c464587342e61552c3645dd21da7ed230af6d42744a2d63160045f0895da6b822d49d006f82bd89dbe3885c72c5b584a39399218a307d8b808c8c6151dc02b1b6cfd6c3a7a0fc069c6444978244ca83ff1c7d9b634a69f9b204c40faa008394bda704d781022e17da170834f4802d75ace6e4bee19e90fee4c202c8ab25709fcd1671ff95b5bb7a31c4fe108a44bace0070d927a3d5ee4339da2bb37893dc3fa553c00284a6f427f01c48883fee1f9424a2fa1d77a4bc18039a884c4a02b9320d76a30d1abc7547646d9f15ce90c8a872a2512c5448765313a3d9b6b182b47c98b3627d820c42d8e199df4b6f03f082fa46373dd1e6ac544c12b8bc947059d96f61639e5601f6fb791a22cb2ea87d9662e61210ae41eb15ffdf48d82a4047e6a7bfad72ad6dd65f2c72b56ed747ab439a9ce56e5b522361209ff5314ef2326a77866850b6bd81685eade8e46a6df743d15a00b15a9a025e4604011603d91f803c5bd84bac4efb1402172ef21e12a31f24c055c30f111bbce71af971d64f5a96650c1a012eec7bf0e5a1bf193e7fa27cd90d27aba5cdc32123bfe4eedeba19f293f2040a575dd125ca3c1a11b7ad95ad0a929dbe68134fbc3c301051672207f336ca607107a7daa895ab2ed530a5795702ba60439ac9591ebd913cc78aae57441d263d5cdf52cb7e120cfee34496bdb89100f7100aa9a87d62311569715c9666d565501beb304cfb5b6e588d7523e9802f0667e87b81f79fd25ce316402159dee2f28dd41e9b57fb937f529eb92b2ea7899ce1c69598e69c5d154fe7860d9a355df325b185e860520a7553b96622cc9b1e9873ca44eea1e2499506c4d88196df53f75ed8972fec49e5ac3223763092b0b66291fd9e9c91988eb23f6ed8a5af39225b0e3fc35baf1d4ced83fc4449a83574c27f828bcb8e2c471bece26ddc11df60b034764b1262a3dc37692b7c3a24ee03ad40c9727ec458aee2c47d5b0c6500dafd43d8d6a8a32b7f99fc3e5bde82be23216053e6066408168ee93bce712aa05f471b29d77475eecf532e41f1ced7a1711753dd29f29cfa08db496f2ab9d29863afc64d5e5b31f5f57ec3729f19bb7ec5708911e251b352f5f51b8ccd0d4d4395d8535d81ec559d0065ed003e7082815fee5774124ff057e09b8b329937a12ce78a44b6b38e1fb349504af5cfb6fa48d23ba3944fc7c8c747baee023cb91c4b5144ada90d0f23203b32bead83b6b377eece68951cf55efe965b4a0e516e27c2352727b81cb35361361a36a45d7ef959349bc766dd94eb732267fbd176a32160cd1b17e1b3a2bd93f496efe9fc111f91b317a2090592342c6bc40e029f4fdb9090adb1c8492dc058f2eef8e2ceb89896a7aaae1434be314b599fcadb856659d4821fc436f897a62efc22a932a90cffbf6129d790fabd761fc4a8a44770d34a990711ff0e242c18bdca327303cac68d0170d2d08c1cf3b9e89f4074724aeeda916dd21f93c5208774953c489fc13bd6838bcde402a1d83e84577b068c27c3d43378f351cb19f1df6715a10cbf87fef75da779fc1d6c9f3f5243ffe051fe4739c84afbbd3e1cc477abd78f1939d5347d8743af7204e4e756d4e1bd5907930668c080165f9dac6582769f9530d3c29e0a0f8354e94d1ed3b527155b62a3094b2002bd684c82180b368569c3e246c3b9ab4d44600d4af3b9a042bcc0c334254a2af485fd86470f4f885dc84db626d4f527a8ba3e4c0803048bfbb928719171b3a30cd775369e62340248c17b6ade19c3e57b16e447d847d0e314199fc964800871c6fbd3de1e0fe0ecb4a884b3b03cf5cd3daa1513cf45d1c4061c55086a6ce90d7a98a2e403eba3e2f88e06b339fbbc0252522c238b842bb405c2db39d60ee151433f247e4cbde0a7739fde32f27407659caca5e6a4e24e241648d220f323066aad8fe59fa1b02945e585d734c43bf45783f0687df1fb201ff36d2283bdfe52771edd3790d159a6b61ce9e5670c3af93a65391359b9dfd7bbfb21afe8d0ba0b2794b7639c8b42c90c6253a6669b0bc990608a1d881d076922ce3e3d34b472f324b1921662d7e5b2db963944861e80ed3f917b5ada58909b9c42bba68ec14a210403e65f4d340db37c64db9ecb322dce2dcec1a7bd5bbe3d34772c9713f7865d8dad701c9a3a2df96090d95fbb557ba9517f33355ef5f4bd14ba1b365c8e41c6b3ba776a1aa691cfdac8fe28ceb136482907b8348ed18d04bdd3d49e74404f6b46f9c94e9404732af6168e382ffeb189e66c8a1dad730c0c5fa4d2513f4484709cd89a98cb91caf4b659e73cdef764b42e65db3c72bee15992cb20289db223dbaf4af56a86f80f35c7143d9191a07806a903f58562fc6987e56526aacf0ae6160178a8fb1643c06803dacb19cef25442428eeddac88b391bf3d6df0106644ef1b87972fcb35d21873b897fac8cf2f894e0bb901b6bb89be151806ac7e82bebba14be01e47d7153b40612b3fffe95a46f5b19404d19598de9f61a7666cc201eed383c6471ffd845c5d7ab0d7b18765724c85516d8a75f4306ee092eea7634ea22b0829702343cd6f4f79bc51db3c20ea6dbfaabce9880f4d52a84825072aeb1931110c03355c6bfebbe03960b6e3d830065647092648da9ec87fdce2de8a5206dd9a2ef8ad5c488636ed6c22fa6f20d1b7b521bd9f6c4eae666cec46fc020f5174f2cb179c44c28521f6a1efc2cc9e10a2f499b9b172a0f68baac987ffa1301980951cec8bb8a103c0c63234cb9b99f1431336bb1849126ab93d008fd340afc548a342900f596ffccfe21b6d366bf6a4df26b62d13a8091c599d7b89b7bfacace49e6a422c5ec97c00fe129d194559b1cb894de6dde750db80c09470fed0147785238b5454099ccdaa90b5ba4764f998073fed0f4cef9ce38cee11617dbaefdf8bb454fa358f492016c99549d8e213a1dac6c3812c20067cad0dbcf992a9a463919767e4024c4fdcbf6ee621827a5529c42232de97461b9cc811b10a0c7ce01d4936e66c53a7b9051607ac5adb21e2c20493b16deab82fe93a2d0470d832f832f777de6f4851a8158bfacc4b9e2cafa35718d27fc39f0068b28e0330779b1356ab58de1f84b8b0f9dfc896343a382d334ff9e37a315a5039bd64a48a0ebdb1b35a53128ca1a72db5c4b9e1ea4df828a519a281c39ae39348e05f4a6d234b8de2cfc6fc7f023144c0ca07a306c651ed83c90e82e8c872cc617d631183b07ac605a368ccd8978c06daf07ef72ebfd7c99dc29b2a1f76db097489f19ec61ed36f310ddf8c78cd6dda2ad0d0a065de1f21c09a8f49b7f42904724c86c44ab841746eab207f58285df2e30f1b069bfa171f0948a8f36e75e83d240a55eabf277c4e57bdbb5b9208e07f8e4679d1c06c466ddba6b6083ba11c9a2e7688736eaeb05cddc4b26f42cd81826faef18b5c3aee83abc8ac00e1b37d3aa87175a039cbe4abd46538586afaef6c195a58248b61ad605963825119c90980ee6bcb8a161774ba2cba7abb8e2410caa70253b2c89728f60ede00c0c4288fc0566aff104ff27f35cbc06b16edbe5f6673c09082e0a2eb6f959f783450a42d28c34680c9b273ee5547817b8d7f579ea5f81930c4a3b94516aa76c95ae0cf6fd885ee7a9a9af76317d7cf3cb05377ed539f311aa3901c044ccf48e69cf4b831b46887fe73f8d1ca101ec5183e60163e47d0e28ecbfa53ca7e0bc18f85760058b1f97dfce72d709a51e6f5bd5cf20a5c159568c90b6471b7c02234c9e3094cc343c0417717253487e8eaed8f7fd7945632c98a6de6c0e98f91fab5830234d9f9c903d8712375f9c9662aa6455d8ad2fb3ca887017346175addc23c8240328f7dbe414b5baec421daec084edfc8839d14a4ceaf4ddfbc3879e2143bebf7faf51e74d4c1e776a1ee660044568ec0ad7a0248a46d316f572846d87af0041c5303dc482283f7fb80254029f5c08f828d36bf081f086985befde939e303441dd7d3b7bbf330c31da29ecf04c4f00762f98b8175d5e7829d2286246b2574f6740456dc85ee18ec2ea8adc60ae2a2bb887db48de9d7f3c005556cd9c293f8b5f6260e120786f893fc1317f43afb9828e7830915f3a3c232a3e59c66b29a99e4f1b0b3da6e81a7f7cb23fb7ec027303faaeff3182ab9f3fbdf63fbd69c233fb8b035f4485b57c4fa1eab0589948ee95e57c8dfc151b494ddd538ec8ee30345e721c581478e0135f66ee551c1c82c4f5518ce6fc9cfa69a5264dcc67239f02550a079c6989cf5f3bdc9599b24ece72d908215b317d799ac8ceda53b0ada3b69340f1d3301ab8787169562573d3f29b215593dba4ccb1719bd0517d1f71273dfbe54e8ad6f66679f943819ad99ad553d56886da84464d9bc64513aac512598ad1c26aee992f3de277ffb558e27eee138c3087087e699d14e60965699f9c67ce87d170406156ececa8323457959ec21e970d99f3d7d96fdefafd08b65b996b87187eddb92a232b3eb2386ec0ef623d6915a279ef84bf0274956569bda5330a7d090c17ca32c4d6115e7a73d6ce52f86f1d5524de30ada1c7a2e5a0a1fdd24390756eb4050d12ede13ef0b31052505937af09dee0b821128812a9dc0bdc173b3f6e85305b82f126198a65ce7688dd26829cb295d728afd8dcaa314b43e6aaf213bead9648c8677e32094f1cdf1c32a4162bc59be6781b9781db1d0a0fa9378858e5ce69b32e2e6baef2b2dc4c714cc6b7473d4fd0984dbab86a3ec434c5db71bbda053ae6a539cdec749852b38532be4763ddcc1bd4e43959e18555b41f588d41da3417a97891054818fde6ccbb394e31cf4ff007efc26050b53b0468342fab39acedb3ecba02981ebde61e5b2ac6d15b680872f5ea90091a82e5b6a2e96987da67d7865dba8ab52a542fee2b81e391639dce1f95ff2f82dd1f4cf8acc5bc99b94918591b65d30c63d6889080766550719b6b7ccb5c1cc9579624102e2047c42b24618946161c3b62276d0c556ed2782e9d0ff6e617fdbc3dc0a06f4b954b39a0610c735fbdbae76450a36e0092f6b041581c47d56f2caf5dae9b45f38e346e51618e6c4161bb534c534d6bbb1cad4a9a57f9ceb05c23478d543acc211065208f93c815f84b9e20abb2a7effdab089cc8b828d6a7e49ee986251fc92f466466934cba49edcd1eaa7c1809e8f47fc71bf905421905f05d7569cf601c5b51d5f51d164ad307fa5d0ac4f3f53a5240984622fcc36f52cf73a7d2b9d919fd3059aa7d0f22f224a2e158c1cbc4d03975736ef8cf9d901301801289e7883259c3f4221bcb993081824edb3b1e525dd953dca87f7ffb5a06ee0d23e351b87215daaf17584d1e9e81271593ddf2eec88c3ceeae430ef23388683dbdb6777a2c9285b36c5ccfd43606b6cefe00d7313d0e322861b69fa0cba4dbf7efc1ac7ff34799c47ea7b55af1db99644d1942d68fc156939d9f5bedba34e67a5c16df8e197367fb8ca446ad82423188ba2f33b938b54b823bcefaca89778630142a056558ab47048d8b665f82d9170a7bfbdceae3c600b90dd46e1916099fc2f3126535d8fb91142aaa39054850ab210d86fa7e55034d5b2a76a9b6642da8c5494fe02a6c6784832606b0a5da4fba4d697edc1fa20ca2d2e190361c95b0f3d656d67a58068f310e62fb7d82dac02929ffc9c4d8c893419643e66646be8c16b3ccf59498b49d598733fac741c07b6c442522978aba48fc353c4c8f8c8c703b365a9c261ed0c8ac34285496851d16aae71b7e018d31cfe747a77b1d2671b455f2bde53f5188b47f2433bf3b219eb6d1e9884145e5ff9da9584a8b629d1bd646fd6803c94c3a823a6284a63057b0f5060eee1c4b7b944937ee7177ccd916d3d211f62be1de67ec1fb600cc23ec412a3de2b4ead2af2d634860bcd910d7b147a8bd84f9412cb9f227b668c260722ed60791bdd26f9f29e8f6816c12c3a6df78ad0f89b4eea8e1fd2b45ffe308dd37990711f5f6d778573e05220204cfd6ecb7df1ffb78b983ccab67afcc3fef9d2cee7eaa857625dbda845c785d1cbd6318a8daba877c58ccb632e5da07f5cc096970d42c8988e0c883bb9c68f4e472be44a187a4207d1e2e68e3417eea0b82adbcda7ba64aefc6b04c6edcc3a2c5538026edf8982a6d7a0008fe463713c3fae368ccb14584d150d72d67fa40e91a59b5d20911a2af993eb96bc036f08b9dbf110a5da5af3e3e7b6a4796e39aa829c89dbdcb9b43e1b81fcd3feb60e5d86478960860a5e35699d90b772b6ab572b76aa6334864e047d4750072732a92ebdfcbcc035d86cff59d5dda84ed2c49cf2e61fbe591fff32ea8a61954e0c8075e71d1946773fad1537815f89127ddff183615d5607a908c3567d9568263de6717b2f9897237c536b24982a51453b19a1f286f31a017e5b1c50587a0748534942267572e984e6b3102c0a6e2b207f89af0b872447b6d5280f56aa0fb4fc5d443ed31979370e6eeec186adffaa41dd6ad4cad767fda99dd718c778de569345243372686d1b3d9af9f03af94a9a649e99b9dceb0018b31cb904b16271547a949c9941db8cc9bba6d2e4edb577c4a5fac0934d4c69b4f39a22d5fff2c3e9dc30767b8ffd196787a9f0f21884a1e76023d4f13e7f58c69b5c27d80eb0d82ce86603ed28490a904d2aa1408aab9ebd54c8f04c974a69999f1ef252438286318f40881339af072880fd50679d3a81d8815e7296f26398592b3cc879b82a6bfae5331576c2bab7587f035cf00e6b0034879735144a43297414ed1578b43a39245c8786eb791964a01e7fd9c7cb635dec362e82c77281465bc516e8a14e6969bddba20cdae37daaba1b50c669a4eb8136424a0197c78e0221209cc34789ffc88a17a1b0cfb7bf062132f54800bc063c4ca883d86722d47e36948f4bdee4f1d75799bebf795877a0b98ffa6f394529d30e6d4438f8a55223d413e05b476386c6b62b4c8d48e6d3a5e392a757290a152f0f3b82cab42224b82d85db1d69838f8c7ff5f801a82084dc3082071d215340b12c37ea4e048399c16161c82c3c33bd255605efaba5a512d5eb7f1c1333bff17c6efed68d89994f8234e5b7e31367ad30f3fa3da4d67f7362a694c0f5bab96680ab6183a0ff1a866101979fcefdc1614b655947bd45b38ebb5360da64b5dcdc7cdbef521d965cb9db2fcad59dfbe6e76e16a825da5a17f13633b59b5f913ae41e45e3d118d1286c1a94c4d896fced4ad9d65016faee235a8ed405f4038cbbb39f6fd1ba7410e8d1d1829f275042568868f070b704b63e0b1f9591e990e41829dbf6ce02d2bbd08d6a50daa411f0e5f066bd2bf97391ebf2114e30c8d33ad9164d509f484cdf894f03a758bfdda9a50492b34300ab3a4854fe3a6fa92d9297087b58f26105ca609d39490916fa38053e26356b0a09b0a6ccf7ed8783484d1633cf2026cf371a58ad48518bb59e7c7bc735e5bfb51230f87136c7fe6f0621f738c53cbea5338f81e08b892269cf9ae59abc64e013d87a511d4689b53478af47888ff37fe981a22b9d12219e84407191a911a6e1da421042f9c79be5adb0677ad09beac8286ce45bf0a69f1e0bb036209cf572a2f65547c2cb8cdff04371fec444f7196efc2e743911cb500453038bf41fc3f4e42470ec4504c56cc18260cf03804c44eda2106af3bd9129194d7f550df6843f7516fd766c4d5d8bbc5afd7e0584ce4943ca24071095ac25dd866b9d2dc4129c462f14a70109bc20e36372107a1e0ed0806f5e8f4cc66e66a98f8cca9d1b44449052b2d71bea838a38fc1d531e95667676d4f777bf7088a3c23e64c44819ac9ba3e3a5d56c12e21a08b2177b65d4f3cee656e0f260b56d8a9de7887c549b1b0033159cb7a25fea538bc19378a5581d4196be801a31cffcc6222a2d90408a233a69599284d8c6bf8ea34692251ba46f85c9022b38cc6c97448626330f611f66b4ec17264a41e58eab86586849f36780241bf199c5a293c6fb0e7276489ea24cecca4cd8383cbbb107de54ffd25602a36de54801235e54a19f8803b98e3ec35848d70b73d6ae23ac95f1dd4bd5448b3bbf95e57aeb3035e7028ef9f972691634f456d2d9add4bc88d35439e0218a464f4fe6ee74ae97b8c9ce5058477506739723b88d96641a2097e5d94fc2ff56ee8efcea6f3d51fdbed3ecfab819f2fa68a9ba2a79168e04544693086db5c059f421ca972e7ec708ec5e48ecf0805a2073aaedf1d6a0fd23ac5136723c50d25aeb2aaeae0216bf44af477c72477944c27f826e201e9f8db094e64afae3ac946da506cedd55a07b62085112653c38a921adc9a32fd809540935997de3216fe0bc93c950a6024525cfbbff3922a3a09ee7dbac1378ecd7bd6368b25354867db35e80781ed1fdfc70afa5f38837aff9f7e730364bdb6c14c6b4a72de558025dc810d16fd32c6b54b2dfa13ddcb14e4ce994415e12f595a9da14b42cbf3d95ccc01594f8060af66381e7a08f95c5966d966f1b7295c8f26d429be66ad254ac800e748ca53fa2b962c5ca93acdcec3bdf5d43de7891aafc22b06db865453859b1e1666850255c613c004dbc0a80ce1117f148696d1a092c0f0a9759f3871b754f18307f192b35f85029e0908811e1a97ebea9630c3e8b3eae89fab4519d8427066a66452efbfc255129e58aef21b7695b53774c3251e582cdb95a6fc519c33f2c34f7ffd89bdbee5b2c9862ea2c3764e7e1c88904b2d19d849c00e945627c4f8e8cc7852c03b036cc5fd63b86d19606c8917f77bb7e0f2838046990b189a8fc342e1e8128877bd482c46950d90add3bab9a5a5811aced71c0ce7d78654b6cad096c70805c9efe7d6ad47c51fcfe3c45d786ae9bdfb03300e3af98e397da515b8b7c3efc0469a77e88f30086cefdb3b43fb23771a265f2d2236ffd6948eac3f824647b534f65340c5ca452ab281cb3968b5a5534e2d644063b290d3c0029411121f9197e0b95338d78e58c5dcd62543ed6f06be3612702aabf3786177f1b051e5852a932497569abdec0d4419830e4e194fcd75a0be2d1d0ca8cac4a710ca1af5eb42029517f095616402c28e0f2c3eff5f6f394bf533ce8f0f5d917e4c4e198c0ea051378057104933adbe4e5e1a10190eb05c913ef223fc9f29cb189ba76455dbd60b8b53fa7777bd12bd83f333e81bb885e9d4db6388646acb3df64a1e50016fe06749a09021e22d5821c5b29eb4a25d081df4ab71de3e8887c797fb0836f6acce4bb26e02f8c835f20aa762de1076b0f2f63fe17813aa953023df721c2c012b942a41d74d9550f739bedde11a216a8553187e4a9ee2da8d4c171da7670a9ff889e0ff0044580a200835bd5d1c74d9513c53856774521dfd1f5f47d108e9009703f1830dcc5a26c03463ace5c15a096a68da5d8b728333ad16c48867d786a18217920defa01c6a6575dffe164bed066b55b26871d7ee4308e97808b70b0f6428b00e4248379431169a0b51ee6a3d51e6a79a7c765310dda0bc2d93e3da018f9b5c4c9cc1a3ee97f030a5a48d33057c67a951086771e40703fe721f5779eb40809c7638d73d8445cb407ae33a20a0d1a73d12eedb7932cd07d3c63f119d336ef08057f267d700d863f540a494d20db508a4bbd32d9e1fcef80a3221d2eb9f9756c942be30a979c4f898d732a2fab09bad006827443541ddc6c2edf4aec17a24f898b0d2ccead057c96bc172f7074d1ae1dc75e14d94f7be8d8187a41786fa8bef5cfe65fd81734ca3780441a3fa6ba19645b9b4dd202c49d66344b319a9429b0563edca1bc3cf19bda948811cd83340dc25864fa2d08d9620dafe73bd9d73a6b74f33ee81d528c5394dccbe412f21c826616bc0f2840e5186f7d34166e4c3f8e1dc0755a34765cc9bcb34d7e01775677a9a5ae78ee92289ec49a7806c4aa7c9078f40ffe126ba8f7d53ec655c5d80e72cc7cd6982aff98cd2669d0a88053ce1d78e36a0a796ab97ab7e7fca63e597431ccb2e38f9bcb4022887139ab4e757942688f5a178dd20ab97f1bbd3576ae86b84069cf60b27953580b46e644ab57cdc3ed97a21b188fbda77a8c0fed1788a52a841487f0952fc7026706066d72ae1f2afc5862501d92a6e2af345a886ccfc77a8a9c42205ae318222c3f6ec89538080e57e3176230bad376e6d2077c273ce9808d1094530efe3ac6db4be2aed9a62dd4bbb766def01923f095e765ad8998e38a12f850ad76d4a178cc7bc129a70ea4e9c57e2f1466ab082a88b5c5a0223329fe2992d9fbc4e1d16a1f9cdea42d3745980bd6525944195b2019b1387c2436d86022c2966323def01196433223db4d5afe54c28904134ba813db3311c2e2b6f524db43b65adb6f7adfbc745f7d838340712e319ac8f8b91eb3da040ef53076b4a28d512e02763c4ddf26a40290b2e500a5e566eca14f7729fe44e81aeed8c9cbaa6b3ecf92f93959d3b4eea194e11860cbc91d04ad099141558d84d35daa5944245f8b8eeb8454d32cdb494cbd4a01af4a82ba79583b257d0bfd30e39640bbb81fe1a7a677fa34a7fc5555c96b79aabb870f9caadbb45706d562d1b3ae39f2578e2095c4624ad3ed7fb925dadd34589075db6fdee6178be19e006b04131117189d49dbc30297f408a0c8cc45eeb2cd44246e9de3a9bcacef9fb99b3ace96f78f8667a796920c236d9b5adc520680e931e04b64d264dc4e6063be52f8ace75c536542b88de9a0c832d1cd8da9531716188a44d2501743f2915475633a5325d404c6aadbd49422bd0f1e06cb897c7ad33bce290752ec7a352a1388d6aadd35135581bd1aac7374d933e9d6bf6989d0da808f4f951d5b8da2d2988601b4f70b9c2ff048a27089720f3013596bbfc77a89b83a2a0b5ea9890b3472ed28c23060e10e2136b8c756f15f5d2d2e07260bd526e5829da66c4bf45193babfd599ee1ca7c14d16a57cbd663cd198875679381df014c0b0d61d061a860e64aca2161ac7ff09f402dbe18c85f679381967947050089c18b8bcbca0eb8252f470486e25eaea6706d5081fdab2363ca30380f1d10c859ccacffb4b229150f8cd8bce2cb472081886f01b14456e2bec4a39b525fc428a79dd7c09cc3baedb68bd69aaef82bd1f16b90afc20ffba9627bb156e826d709e54b5a0b9a9af030f73eb2ce727b9f8f896eae8897231b18949f7211b4dad2b043b5e23561b69b08ddb1f879903724cdee26f4293950d2e6f791203ad2ac8e135ff05e0474b56fe2906152b5e3d853f955182894c2bb567140a30e0a6d2665504032b603272ca6c74ce180ed49e87c34c9c6206ad673769a90c0aa67c4cb14d10cbc1c4c6db3b9b025cb24cad6809dc57273e0e6dc642872474f9e4d9eb5cd9555150685a2a99d4345e549a957be9a9d0b68a068fc641ff1e42ab58d1550d29f7b37a14ad630030d4d27973b4252255ce52e5d3865adac48ba4259a96785a4cb7e3a905199d4553c48c675882da03d76074595ef9ccb2371dee79754b59fb04f4ff9ffb13b46a72794c1fe9ef469bb691e944b929c2e926a98877383232d1d4983bef20fa33e71df759d2f0716d5f39c77949bac32002c0ff6e61807b5097bdfd99992fbf1d010cb92408ea6a89ff4fb96b5e49fe6f762388851548993505ead536d05e1837992b744c351ababb9810542c33ea42af6b03bbe07f7be09de6ff19bca30d62e043ac897ca1c1d59f5573ff571dab87534f4b37053881e1550d5aeb6496f966d38a09372ba62fc98f71d3555d081876691701a75d8401829230d0b904f18590648064174ffa2e52810dd588675172a5415fb225f4a8b208644b88332efc9e33a8dadc358650a902cd796a3edeb2a6e55ea2628e20237a3a319c807b4a6fd8c772fd546d9fde37990f7e2d834c189e006fae7e81b4fe325e0458ec85f8893673a8a7d32bcbb096c7249e0fe781b93e0721ae85b3eae6ae2c706b6804c064aa22c91fe7804f73ec113ceb0db11e2a00b6f10edbf78fc5d456d80de3a9d10a50197d20b3184963553a070f0f4d683efe7d81d34d587555ab4e8609ca70fab56cab7436941793e5513f68a3d09cfe444cb7653969284aff8ee18ea8d8d59bbd2415daf50b966eaca116d64199699e2aa1c97d71690d8072ab8d6930a175a03b97b104797e23ff937b19d44e438295f8985ea4455209171b49f00f3cd179dbc448f4441a1a586151a93a95662400280bf4bbe3b5b4eb28dffedeabd0751b0d610d07d5f0f303875bacba754901546f9c4e95705d41ffaa5b4e51fb46e9a6c2a898c34d038a110bdc10284a3a720da74a65ff6579ebc8929b314eaeea02c5c36bb72d8f19384247a04e7534d141c6e6da389441d691419efbbcb5f679b17682a168b59e3e547e8773fc5c23eef1bee5ebf094bf02a67d9b4a7c2c5c5694ebc565a72ec372296d2cc0d09a81b7440654f0487d9fabed89e839a3ab449e753853e88cb3abb51608587e79c7e8bc878989d0b78d85c1fafa5788c73eb64fd7133ce4932b35a701222f9710feb3d36967a5423798f5c36435ffa793e1e05af1aac1956bb14ad498f9fbf73884e20fbc29ee66563e6322be2da76071dd2826af8816d5b58ab9fe2f468f8ddc55d6093517ae639f15928bdc81ed650cdc9bca743a823c060b910a737ca0e428d376e3292b40d4e93626ad53ba4e64a2c8de131336b02dab8859b1efabb73d8f51c809408cb7ffb860d610cb4fc54653e9531fce0350618feaf9fc11d1d742775682cef8c2edff4b8878df2e99c3c0d1cdc29dd0631640803d5f4005cec9487ab2984ae5f75cc421b791c33001dec5f2d8fbd7b1c8249e786eb89b14208c8083ac159405676adea74960dddce873ecf3c7f9ba4733a2d4b98a0a33e67c0c03bd3ffa656d0f4dd77aade3e22b821471c83769b2d1ac8cd70ea3bfd18de719f665dc5c25863f184bcc5d19d4570dc73383055614deb7741ff4bda064dabaa1b315271f656b7056ec4a8d4d5a46a5a1cbe6df328c1e76e22ec5a6ef822a9d33f803970a379197f448df1732ba564225b3be5ae2c0d481639871f5dc8435084028d66a1eb186e9b870afe1849cf932984e08f44d67d8b853e740fe044d1a9e1e72b152fc1b7e6ca4a9fef8ed313abdfe695f684f110145d958247081dc92a7d5ad627fece3d6b3da9c53291b16bf28b36bba3826a167980019119d44fb9514452c979d490102a39bacdb9a3d592e04168d0b57db4cbaef845d2236fc76de39566eb35cc9cea93f2f97e88f990caf026472eac2a4c191c165fe7691383f30533621823540d901cea915372b8d49a95614e9592d579cc7e807980edaa6a6fe407a673799d1c442af7194e7a2a6fce3fd3cc72dc68b182f743a549d8ff8f59235356389c9fe202f5389b534270f8ee8a496b2bf2b7b269a18cc2d87f657e9d9f56c77dc14e1143d262087cedb5e6badf75aa23be2e7c5fcde21db2334250ea8161d8577bbb9af85b897a1779228cba8e4dd7ef7cb611f141b3a025bb2637b1ec28d27d10873288c67bcef525f59487fb59a56082b2c1e32fb9dcb179d0fbf6be9795f6aa4511cb58c1d3f3203b787cb16de85b0894379725ff538fee4beabc88fbada1e2b3b200d5b11dff35e9a9e235f7868ba426ad9bb3d2166860657fa109edc96dc27f23de1d86ae149c7f9d1b5c87b051d0500d706d521ba1dc2d7d10d56577688579f8b909cccb3862d6bd8e6990e1ae45e454bb064c4b9554045d58991cb3849ebc583e0e452086367fef1a4303a6d9b94d4f378f1e262609bf66c50b097440ac492ce2170a70d55958043594d709f93d05dc85b94baff6b50d4bbd9d786c5e417caf3c0cb5251f9b31c313adcddebcbb6e16aaabbca020467d40ba80d7af72a0a8577328651a2f9198bfc50e4b5633a6e2353c53013172784b084031612d8b5ddd694b4933286d45e4ea9bbdcbef2964e4054f70b39bf7689cc0def6efdbb42f4d43423279bbaa14c2363700eb19a6fa8d799741cd64ae0f61b26d5d2e04bab76f5bb0b57166d6ba089637ab5bdfbe2191a49fa7fe55db9f2f48c9a7a19e1b7e6371d9ab9d34380d2db64a402016184e7511c0d1121b0579580e4d1b2c115f8bdc7368c585cf8e391f96f8f8461d363b812d10b29876b88991802803914c49eb1a596fd9d9d1405e06086838f46dfbf38840931bf701c234b4721ce898937f116384d15fe292a60bcf120b9caff30b76312b46e26803f949f18ac96e1a275869d123e642f9e630b8f91b561bfb827f8e52f73da4be6462fe55027af78c48ab53885d1803c7789dc3fbbc7882e182548877154eee03f32d5b5e698cf5cd0e9322653e36c8605696877fb1c8b08e818443e1c14365c7cc3099333a6dd706455760b7f325d549a2e8fa5db03ab0d8e0dafdf0f592eebb3c8f7413beaafec9d56dbf212270d7a6b00f1a0e15de9927ce11e564506687d033b2d9703cb804b27a65dedc8bb7171f9823753cfb8dac66a8d71626f9c7f3c6ab4027fea1c9a0e542965bae03cf23d5b11a6da883987a32c9e3325ee736d226e83ddd26aa02c7b0df42d855b08187c950ca55687cfef383791b1f450995e97fb4e97042bed6e0ee81aef0121b87db0ebc670959f1d7dd8c01552534df2ab8b49bfb3180ab6ca52eae24679993afe0b53f97770ad7bf0e44ba747c5a9b228a2602acbb5b163bbcae6afb0beafc36de39020b2bf88bf0327c666b3c2297b287dedc14ad54bd24fa4f4f1c7b778e945236ce4ab535fef2f2363badcdd430c65c797492d7fbd764f028e2dee41097aec02f7324963a56642ac22e7a97e00f55d59a394cc9003ed17b4690ef9f3532bae350a907be3723742efc9bbfa61ffcda036ca2a72b47686cc2b7c0cfb470473c775a97c769ed58129c21b9d80b85dd08a344bf60ac4607864546ca50dae7d926a132faaad06659495abb3953f4ba7642d853a61af99408b4eaa47123d1d0c9dbc5b5726c40fdd7de2da14641248e3b4977a74e2f34152747c7362962148649fd3acfbf0e113eafa97b7d9cb5d322167e1a8c6df2916b5b6573339bc1fe609f5b585aa1a3e288564d115b31e8efbbeebcf6e3d0bd970f4cafe307317c8138038ff29a9fc76818c0aefd723d84d3e9fa5bdbd3a9d14ad9e8e62fd64dd91220761af6a60af70fd8ee3aaf873ab3b27d9fb25a7fe8a437ac53b89058d98685fa1937e34ba0a63a8d49f19d33ad8d1a283ef56090527a20c20837b54191544ede51fdafa0beb93c40e9d40d326d7050a5de99827180359ecac4493742de90a45397b9ab7cd539519be2be563cbb5c952d0bf7762305a79addc6a2c9b4669a610fff11854b9da91f599db3f4ec7b601b47963008b0b227d24d91cd6d3cc4cc4b689df74d7ab169e8150efb4fd6e4205df842680a6c255505a72d8142094539525bd03099bfca4ae62ff1e52c356d828a5aef0cc0ecc868827d962fff0feb6bc8973b4aaf55bd64faeaac95845108969f8b93793356985cc467894934e775f102e5c3d7aa397a935cf83e70ab524e48b32b4e955731358d3b39fd167386c7a16d20af3d67d5e2cee3425b5e316e9c20736c8a86a0f2c9d8fb7647cd7c7a2a910a106e73a29caabefd58fb3f48c80b1a49cd080a0d4ed404afe73286714dbfd557661d852a4a7d2923cf32b1ef49b96e67962300e514aca7c1746e2d97f6dcb0973af6d39ab4a49f674086b8efb63a5bdd4526791099b4ac39d806da1b2336e55d67aec5e8872bc44b9cf5183915ce82f2040cf5737b80375562910aa87134e7bdc633a0efabc60a8a212ac15ce01577843472d5c098974ffe971806c78e3fef664c7ed10974a574c9e788cd8dcfa809b2c4c8f78a24b2a27e81f7c599ced2c8b8c53afbcbd1e12d59c264b9820cfbe4c02d1e0570e0142cd0b432de0421807fe6ba3cb6ce6e43e16dd5b18fe85a5a160115bc6b5a1d48c866c4cc17a2bfcacb155f85fefd27ab6fe4516ea4d8c94fe327b87b715514f4afdf22c64339b4765ae0ae52f8611f0dbf09985d771ace1ef6cf0ecb3805d6b0e5e355f49e979e30a7cf932e20ad9740af186246725c883915f02f45c4843e24dca4ddf098ad57be0eaf890d96f10f058af749a0870746e5ae53cc2f176c41cbbd059235451abfcfc1591954d00f04e6f026b62e1e307f56bc93f96250606ab7779c2208446b52d9626d52c71649e1396d5e001d3fe791aa2ca27b01f90af3a1e6da0448153ff248f90cfc82f7b8bfd5d0f07b104c9e9f95015e0640c7f56f989a7d823dcc474b449d48e55ee90a0a707c1b30047d4ebf1144790aeed8826419317c3d92d9d3209b22dea754c222a3ae2daa3e99c1121bb9ecc4037dfeafa383dd0b9aa55ecd84af766a11f0aad4f19e9779c12708a9d89c1417ea29ec23a2e2137d21d08f614731c9de1c91a5eef79aa8ef238528d2ecfc699ddd65f07951a06054a0d78e1a9dcbab2b12456a45dca950cd18c1b4bc7471a0c8d56e71533c55f3a36e6879e69bfbae6d1ee8c20fd53c116f1b45e162000f1b3707601c4a0678f1941bc3afa77fc07a840d666208c46a9035f4105ca7f6e99bb7d2dac1d3b345dc2b001bc8d0d5f56401271bb09b0ba3b0fc3145b1af2f5dcfc3599ab37d3b2feeb825ad34dea2c40f355576a14e65093b37884cab4ed085a0b60b7420a4730ce96038349e06262348bca3532ea1a6deeedac5d530d8f30a922d650d0c7b2f5b8c974f152d070ba871154a9c6b584eaf6d8861e3374f34bb27567604a3a46d5ca4453ab743d45f5a6eef890bfcf5a6f25a47a4d7d85d91edcf5500534388322bbc0ebfcb1f81376f44a27d22f77b008099c301ca271ce78e59122c22282ee1d601cb39b889a9c839f8cc82a545387b3888224a475dc0735a25f24e76b468e7e0de615405a853372759b4581e2b2bc18707fb1f8029e9dcf9b5775ffe417034e2edd63868a6b48764ae2c85ad3669b3dfa9cac5ca6e658f93a7a734f13b8b7db0cd67ef8d12b2fd83d5dce9af4eaac79e6099e8b76e31e99f996f9b53c6eb0931c58c2bd9a5f3d3492eab69aad36b4006224045db880c3d44fff0722f46da0b7a163a2626a1aaf5adf8013223aa19b4f6ce65e93d778a9113042bf4dfd41b51bd92efefc5fd9b4fe8f87bfb758317c1caa79388c91c1c067b1bb595b2d64b05b1ba69be2c5bd1a1ccc9084ca69f004b586a35f5b6fb5340d74532ce1f020de99fe99e39bcdd643e2c3c9638f2d733145381ea62269506e0abadd3b244f33a6535208030198304eced791d6be7fa6e616b697b3f4b856099764220649281106c2e692e7e86352c2a8a4769ed365ae46abaaa429dc90e917f98ae297fe542c72d979cf799c0b19aceffdf1f0b0281c0a6f270e2adacd9d7e5dda6821ebd0df7c2cabb5c977be3f742151a83ec77641dca180e84790eca918c9e690c9e8d84422e3fe528f05674a59326022f8b4d3f988b1a9d9eded0b450975c5c710af69c331c2e6ae37b6b89def438f49fb4118657f0a0e967d32555d89459f35d19441ec1bd1626d71e806e329cb961ec472c564143a9a2d66b0883d10809d3e98e7e815196656c26bbd2f1b795145c240d49f8d999aae5b462c5abe46e9af8cd724995655e75608336e56c9e094d2e43a2ea9a735b5e0ed2bcb99dadf99494c8895bdf1a829cca1dd21d9be0a94c7e8f93a6a84606fd08da65b508081a4873576d2828ecc3aae63ed73bb9c18c49c895a6e20e12517174486001adc2a8a6acd6092fdb14c24f54c78a7cb628000886f100081dc57511f5fa7b8e8ca222c455832dbf58a31cbf51ffc9069dfcd248049afc3b72370579f5718d5ca819cd016e02722cb0fcad344292f802ea5ae57c178b7623fe784486f7c02e30c94987434fadbdad3a5a854e1305eb071d73acc827fcfd7131c853b962ccc2500ad744d7d5a366bdf082963e8935f6e770ac96bd2ffea63fb1cede05a0f2765e5053d70c77f4e8f07f637a7758339929ab95e047acc1d5b845730e3d91fcef8fc975695ea3880a0b59fbb5a2fe6b20318c6f42b2b19434507d63896a593b345f2d86a26d43fb5ee6539c52f5f5a9bec7b72592dc3ed84693f5f138df4ab5a1f296d547f6a77e8110d5ab14c22d61c97b38edab6d2868fb548f0f13f2beca85394555cbc3037b8e814416f242679aad5854c136a5ee99e72caa715359c8323086f2c055cb33cee85e16ea9f8052d87ae0276e792e0604d46004b6195756236c36ff869bc6a2dd27695ae3e749ad51f0c49758d9690c1adc078261004c72f6063848b32ccfcc51059c427fd7bc707dfc609c355985b3b99d4b3fc8162993e5be58e06ca5c835fa6a3c74f6393c98f2485fb86e5d2501267373d15b8f589b2d4d4a7f5d6c63b021f33327669872ba0fbdba871d4a945b91e56f74fc45e83f88170dda2462377e9bfa65325f605df70efe7c57f7cd81574ccfd855ee6b16cd4d6445dba38534c26d6568b2f6983f307cb84212eeff07683d7f8b41c465a97f86407f633ddd49bbcdd6db79da5858e67ed52a7cf1564ac92b332cd4fe993f4912d67814e3a405010e5a4cb272b0c94432c65c69c2eb7f315ccf504f3151ce26e137055fa34bb2e912629b1b0876687aeb13be7936be6807cd972edb1b91c544fac6724c5be6acb56732c93e932541f5a22d51d6a42801461b0d3b2c1af10c3642d6d2fe83abc41ba52ce49aeaaae0235d11d7a5c89fdcd4395748342f4de9300963307ad48d685d3329c7f4e4e9be92357a75322aeadf3504b922f1be74e2773367da379217e62e786c9fd5b28bd7105f14a3c0dba9b18ea23394c2134c354bc4804997444104e571604f84f8f1dbb0aebb411c8ea374f8fbeb2845bbed65a3083f6bad0ba3a283086bc7188e80e8ae1c2460c12829bdeb78cee7b7e7181c913718827893d2dbc360d37992c3f0dcb4bc563cb650162303ed6c717bfeb2ad2237ee71eb031beefe0c1e6e3b8139fc7b2a154d64a131cd165e510fd380dee60a0be114008e302ce79b0f7bd5b8218cb8a010cb2a0fc080dd8e134091792eecbc16cb2149d5bfcb863ae441c2f20fa7a7a48d75f257fec37f9248d43ca70bf2601a8df177ba4066b2f9fef944ddba05985789f842cbcdc30d3b7c0ebf88c9f74bda3afd2da5981d6e9e9f3b14c9ebb6753194c76d79be153401efdfa79b78ab6f3624fb877ebbb5061c2465b7792f340b84238db5d5ff49cc6cf3bc47540cfb5fc8f0895e75f3de1d6e48613afe741233e6d4775f02ef62d15bec844956e9c4b20b4d105d69110ef151e578d326126ae3d180d2070bc05c975e8bfa774928db312a704410b51b549af86c1d22d55d53d36e4764a213ddcdbfc31c27836b12a0753406e2d9189ce06a6a38052308645f2e63ab6f040701e1deeb223e1d2f930bbb83def38648b84f7f2cedc4fdabf79503bfe7ff9173e338fbc30bd21085da2b672d309058aa2231568011e8e8548444ffa1be356f1d983dd48d31c0ae9c9716d8d09a7cb269a5316d44bc0cd4380d2deb7a910dc433ee410c06836058b4bf5091578bbc68e52d57b0edb164abec4c747c6b77c6a21f7bf3d70be8222185a9098d09a4086ba286b0a31faea851dcdc9f75aad10d37bf5303cf61daa38c2cbadf736e204f81496daa025dcf4063dc161365c05184cc90b17a69d49b448dac4f33dcfb04270957d7ebb24247b5ccd5dfcad504568cfc95a184688704accfc1c09044b6eeb96493ba8252af859815c005e7b7646679231f50b7ee08ac4a58ccc7fe95f2785d5b9a70141268e681ababf04114361ee9b9d32152c506d431298797e8981ad7d03679895e6b55587a6c38a810de1321bb32ea4874b03ba4d2296c6157e737a71e11174374533f8c7ffa44c907ccb2eb1a27a871c9a4648a55bc08d47e67d1d02b360cfc8fb85f6f0efe27689ca8c3089b2f7428584e2fd8095ccf4b6790a939345a792c1bf5d973e67497a644cc4ad8ffb5cb3698abcb5e4d5203bc05665f8382d9bcb8c964cda36971eb686e020ad423828f65e68dce44d7dfd8281b8446abe47c3a0df316b829</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      请输入密码.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>小程序和H5中input在光标位置中插入</title>
    <link href="https://hakunamatata052.github.io/2021/04/16/cursor-position-insert/"/>
    <id>https://hakunamatata052.github.io/2021/04/16/cursor-position-insert/</id>
    <published>2021-04-16T02:25:36.000Z</published>
    <updated>2022-04-21T06:40:51.223Z</updated>
    
    <content type="html"><![CDATA[<p>最近遇到一个需要是聊天添加表情功能，本来很简单，点就表情追加到input内容里即可。<br>但是表情只能追加到字符串最后面，这就很恼火。<br>有没有办法在光标制定位置插入呢？当然有，只不过小程序做法和H5略有区别，这里两种都介绍一下。</p><p><img src="/images/IMG_6928.PNG" alt="安装成功"></p><h1 id="首先是H5"><a href="#首先是H5" class="headerlink" title="首先是H5"></a>首先是H5</h1><p>这里我直接抛出代码，原理也很简单，主要利用的是input和textarea中的setSelectionRange属性获取光标位置。这里不做过多解释，主要看下小程序<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">setCaret</span>(<span class="params">textObj</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (textObj.createTextRange) &#123;</span></span><br><span class="line"><span class="javascript">                textObj.caretPos = <span class="built_in">document</span>.selection.createRange().duplicate();</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">insertAtCaret</span>(<span class="params">textObj, textFeildValue</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (textObj.createTextRange &amp;&amp; textObj.caretPos) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> caretPos = textObj.caretPos;</span></span><br><span class="line"><span class="javascript">                    caretPos.text = caretPos.text.charAt(caretPos.text.length - <span class="number">1</span>) == <span class="string">&#x27;   &#x27;</span> ? textFeildValue + <span class="string">&#x27;   &#x27;</span> : textFeildValue;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    textObj.value = textFeildValue;</span></span><br><span class="line"><span class="javascript">                &#125;</span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (textObj.setSelectionRange) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> rangeStart = textObj.selectionStart;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> rangeEnd = textObj.selectionEnd;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> tempStr1 = textObj.value.substring(<span class="number">0</span>, rangeStart);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> tempStr2 = textObj.value.substring(rangeEnd);</span></span><br><span class="line"><span class="javascript">                    textObj.value = tempStr1 + textFeildValue + tempStr2;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">&quot;This   version   of   Mozilla   based   browser   does   not   support   setSelectionRange&quot;</span>);</span></span><br><span class="line"><span class="javascript">                &#125;</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;form1&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;text/plain&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">name</span>=<span class="string">&quot;tarea&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:300px;height:120px;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">onselect</span>=<span class="string">&quot;setCaret(this);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;setCaret(this);&quot;</span> <span class="attr">onkeyup</span>=<span class="string">&quot;setCaret(this);&quot;</span>&gt;</span>例子例子例子例子例子<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;textfield&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:220px;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;插入FireFox&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;插入&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;insertAtCaret(this.form.tarea,this.form.textfield.value);&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">contenteditable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:1px solid #ccc; width:300px; height:200px;&quot;</span>&gt;</span>sljfldjfldf<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a>小程序</h1><p>小程序需要在textarea或input中绑定失焦事件<code>bindblur=&quot;onBlur&quot;</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">auto-focus</span>=<span class="string">&quot;true&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入文章内容&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;content&#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;onInput&quot;</span> <span class="attr">bindblur</span>=<span class="string">&quot;onBlur&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><br>然后在失焦事件获取失焦时光标的位置，即光标在文本域中的下标<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onBlur</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    <span class="attr">cursor</span>: e.detail.cursor</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br>然后在插入表情的实践中将表情插入文本域字符串中（也就是表情的点击事件中）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">inputGif</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> index = e.currentTarget.dataset.index</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">      <span class="attr">content</span>: <span class="built_in">this</span>.data.content.slice(<span class="number">0</span>, <span class="built_in">this</span>.data.cursor) + <span class="built_in">this</span>.data.gif[index].code + <span class="built_in">this</span>.data.content.slice(<span class="built_in">this</span>.data.cursor)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, <span class="number">100</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br>这里我使用了<code>setTimeout</code>延时了100ms执行，原因是如果执行，失焦实践是在点击事件之后触发的，就会出现插入的位置是上一次失焦时的位置，所以需要插入时延迟100ms先让文本域失焦并设置好光标位置，再执行插入。<br>至此小程序的光标制定位置插入内容就完成了，有木有很简单。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近遇到一个需要是聊天添加表情功能，本来很简单，点就表情追加到input内容里即可。&lt;br&gt;但是表情只能追加到字符串最后面，这就很恼火。&lt;br&gt;有没有办法在光标制定位置插入呢？当然有，只不过小程序做法和H5略有区别，这里两种都介绍一下。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="小程序" scheme="https://hakunamatata052.github.io/categories/JS/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="setSelectionRange" scheme="https://hakunamatata052.github.io/tags/setSelectionRange/"/>
    
      <category term="光标位置插入" scheme="https://hakunamatata052.github.io/tags/%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>使用uniapp打包H5时使用微信SDK</title>
    <link href="https://hakunamatata052.github.io/2021/03/13/uniapp-wxSDK/"/>
    <id>https://hakunamatata052.github.io/2021/03/13/uniapp-wxSDK/</id>
    <published>2021-03-13T02:25:36.000Z</published>
    <updated>2022-01-05T07:51:18.472Z</updated>
    
    <content type="html"><![CDATA[<h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>原本的一个需求是开发微信小程序，但是因为产品变更需求，需要重新改为H5，为了重构页面和前端逻辑不做太大改动，所以决定先把小程序改为uniapp，在用uniapp打包为H5<br>因为uniapp里的方法和小程序类似，所以代码复用率高。<br>有了思路之后就开始着手进行。</p><h2 id="第一步：将微信小程序转为uniapp"><a href="#第一步：将微信小程序转为uniapp" class="headerlink" title="第一步：将微信小程序转为uniapp"></a>第一步：将微信小程序转为uniapp</h2><p>这里使用的是官方出的一款插件<code>miniprogram-to-uniapp</code></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>使用命令行进行全局安装</p><p>windows:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install miniprogram-to-uniapp -g</span><br></pre></td></tr></table></figure><br>mac &amp; Linux:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install miniprogram-to-uniapp -g</span><br></pre></td></tr></table></figure></p><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p>使用命令<code>wtu -V</code>验证是否安装成功，返回版本号说明安装成功</p><p><img src="/images/WX20210312-111605@2x.png" alt="安装成功"></p><h3 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h3><p>使用命令<code>wtu -i 小程序根目录路径</code>进行转换<br>小程序根目录路径可以是绝对路径，也可以是命令行打开的相对路径<br><img src="/images/WX20210312-112000@2x.png" alt="转换成功"><br>转换成功后在小程序目录同级目录下会生成一个<code>文件名_uni</code>的文件夹</p><p>这里存放的就是转换后的uniapp，你可以是用Hbuilder打开，或者使用官方脚手架然后用vscode打开，笔者使用的后者。</p><h2 id="第二步引入微信SDK"><a href="#第二步引入微信SDK" class="headerlink" title="第二步引入微信SDK"></a>第二步引入微信SDK</h2><p>由于我们小程序内获取的登录态是小程序的，如果改成微信内登录的H5，需要将登录态转换为微信H5的登录态。<br>这里就需要用到微信的SDK。<br>由于笔者使用的uniapp脚手架，所以需要修改<code>public</code>目录下的<code>index.html</code>文件，即H5的模版文件。（Hbuilder打开的话需要在配置文件中配置模版文件）</p><h3 id="引入微信SDK"><a href="#引入微信SDK" class="headerlink" title="引入微信SDK"></a>引入微信SDK</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://res.wx.qq.com/open/js/jweixin-1.2.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后在你需要调用的组建里配置微信SDK<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wx.config(&#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span><br><span class="line">    <span class="attr">appId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 必填，企业号的唯一标识，此处填写企业号corpid</span></span><br><span class="line">    <span class="attr">timestamp</span>: , <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">    nonceStr: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">    <span class="attr">signature</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">// 必填，签名，见附录1</span></span><br><span class="line">    <span class="attr">jsApiList</span>: [] <span class="comment">// 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>这个时候问题就来了！<br>执行会发现<code>wx</code>对象中没有<code>config</code>方法,但是wx对象是存在的？</p><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>原来是因为uniapp中已经向window中声明了一个wx变量，这个wx变量是小程序的wx对象而不是微信SDK的。<br>因为uniapp在打包时将<code>app.js</code>打包在了<code>&lt;/body&gt;</code>之前，所以我们引入的微信SDK的变量被uniapp的覆盖了。</p><h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><p>找到原因就好办了，直接将SDK在<code>&lt;/body&gt;</code>之后<code>&lt;/html&gt;</code>之前引入。</p><p>再跑一下，完美解决！</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这里找问题原因花了很长时间，因为引入js方式，登录态检测这些我都简化叙述了，还用到了各种抓包，本地代理线上文件。但是思路就是遇到问题可以想想多种解决方案，多打断点，多console。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h1&gt;&lt;p&gt;原本的一个需求是开发微信小程序，但是因为产品变更需求，需要重新改为H5，为了重构页面和前端逻辑不做太大改动，所以决定先把小程序改为uniap
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="uniapp" scheme="https://hakunamatata052.github.io/categories/JS/uniapp/"/>
    
    
      <category term="uniapp" scheme="https://hakunamatata052.github.io/tags/uniapp/"/>
    
      <category term="微信SDK" scheme="https://hakunamatata052.github.io/tags/%E5%BE%AE%E4%BF%A1SDK/"/>
    
  </entry>
  
  <entry>
    <title>html转jsx</title>
    <link href="https://hakunamatata052.github.io/2020/08/31/html2jsx/"/>
    <id>https://hakunamatata052.github.io/2020/08/31/html2jsx/</id>
    <published>2020-08-31T02:18:00.000Z</published>
    <updated>2022-01-05T07:51:18.516Z</updated>
    
    <content type="html"><![CDATA[<h1 id="初衷"><a href="#初衷" class="headerlink" title="初衷"></a>初衷</h1><p>之前做的一个阿里需求，是将原有的HTML的静态页面重构成前后分离的项目，要求是用dva-cli脚手架来开发<br>那么就牵扯到一个问题就是这么多的HTML页面肯定不能手动转成jsx语法啊。<br>毕竟差别还是有很多的，尤其是写div的类名<br>我们知道，在普通HTML中是这样写div和类名的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是在jsx语法中尤其是同一div上应用了多个类名，jsx写起来会很让热挠头<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123;[styles.demo,styles.div1].join(<span class="string">&#x27; &#x27;</span>)&#125;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><br>于是乎就做了一个小工具，可以将html转换为jsx语法，这里需要注意一下styles是我引入的less后赋值的变量名<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;../assets/css/index.css&#x27;</span></span><br></pre></td></tr></table></figure></p><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p>左边输入html点击转换会自动生成在右边的文本域中</p><iframe src="/2020/08/31/html2jsx/html2jsx.html" width="600" height="300" frameborder="no" border="0" marginwidth="0" marginheight="0" allowtransparency="yes"></iframe><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>这个小Demo的原理非常简单，就是通过正则匹配到所有<code>class=“”</code>里的内容，然后通过<code>replace</code>方法替换<br>值得注意的是<code>replace</code>方法的第二个参数可以传一个固定的字符串，也可以传一个函数，函数的返回值作为替换的内容<br>这里我们不能把类名替换成固定的值，而是需要将类名做处理，所有在<code>replace</code>第二个参数中传入一个函数，函数的参数，就是匹配到的内容<br>获得内容就很好办了，先把类名用空格拆分成数组，然后写个jsx中的格式即可</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">submit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> con = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>).value            </span><br><span class="line">    con = con.replace(<span class="regexp">/class=&quot;.*?&quot;/ig</span>, <span class="function"><span class="params">value</span> =&gt;</span>&#123;</span><br><span class="line">        value = value.replace(<span class="string">&#x27;class=&quot;&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        value = value.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(value)</span><br><span class="line">        <span class="keyword">if</span>(value.length&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            value = value.map(<span class="function"><span class="params">item</span>=&gt;</span><span class="string">`styles.<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">            value = <span class="string">`[<span class="subst">$&#123;value.join(<span class="string">&#x27;,&#x27;</span>)&#125;</span>].join(&#x27; &#x27;)`</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            value = <span class="string">`styles.<span class="subst">$&#123;value&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`className=&#123;<span class="subst">$&#123;value&#125;</span>&#125;`</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text2&#x27;</span>).value = con</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;初衷&quot;&gt;&lt;a href=&quot;#初衷&quot; class=&quot;headerlink&quot; title=&quot;初衷&quot;&gt;&lt;/a&gt;初衷&lt;/h1&gt;&lt;p&gt;之前做的一个阿里需求，是将原有的HTML的静态页面重构成前后分离的项目，要求是用dva-cli脚手架来开发&lt;br&gt;那么就牵扯到一个问题就是这
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="react" scheme="https://hakunamatata052.github.io/categories/JS/react/"/>
    
    
      <category term="react jsx" scheme="https://hakunamatata052.github.io/tags/react-jsx/"/>
    
  </entry>
  
  <entry>
    <title>Three.js设置DIV跟随场景的两种方法</title>
    <link href="https://hakunamatata052.github.io/2020/08/26/three-sprite-css2d/"/>
    <id>https://hakunamatata052.github.io/2020/08/26/three-sprite-css2d/</id>
    <published>2020-08-26T07:39:00.000Z</published>
    <updated>2022-01-05T07:51:52.408Z</updated>
    
    <content type="html"><![CDATA[<h1 id="方法一：使用Sprite对象"><a href="#方法一：使用Sprite对象" class="headerlink" title="方法一：使用Sprite对象"></a>方法一：使用Sprite对象</h1><p>首先实例化一个SpriteMaterial，设置好材质或颜色，可以是透明的<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> spriteMap = <span class="keyword">new</span> TextureLoader().load(<span class="string">&quot;./static/img/img.png&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> pinMaterial = <span class="keyword">new</span> SpriteMaterial(&#123;</span><br><span class="line">    <span class="attr">map</span>: spriteMap</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>然后创建一个div或者绑定html上现有的div元素,设置好默认的位置属性，可以用css来设置默认样式<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">Div.className = <span class="string">&#x27;text&#x27;</span></span><br><span class="line">Div.id = <span class="string">&quot;text&quot;</span></span><br><span class="line">Div.style.left = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">Div.style.top = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(Div)</span><br></pre></td></tr></table></figure><br>然后声明一个坐标点并初始化，之后用来保存每次改变后的坐标点</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> circleData: Vector3</span><br><span class="line">...</span><br><span class="line"><span class="built_in">this</span>.circleData = <span class="keyword">new</span> Vector3(-<span class="number">0.2</span>, <span class="number">2.3</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>接着创建一个创建一个Sprite对象（这里我使用的是webpack引用依赖的方式，因此不需要THREE.Sprite）,并设置坐标点是初始化的坐标点<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pin: Sprite = <span class="keyword">new</span> Sprite(pinMaterial);</span><br><span class="line">pin.position.set(</span><br><span class="line">    <span class="built_in">this</span>.circleData.x,</span><br><span class="line">    <span class="built_in">this</span>.circleData.y,</span><br><span class="line">    <span class="built_in">this</span>.circleData.z</span><br><span class="line">);</span><br><span class="line">pin.scale.set(<span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><br>然后写一个方法用来更新坐标点并设置div的坐标，其原理是每次render时使用Vector3中的project方法将Sprite对象中的世界坐标点转换为屏幕坐标点，并且改变div的css位置信息<br>project接受一个参数是相机实例<br>最后通过一个固定公式转换成屏幕坐标点<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> textShow(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> worldVector = <span class="keyword">new</span> Vector3(</span><br><span class="line">        <span class="built_in">this</span>.circleData.x,</span><br><span class="line">        <span class="built_in">this</span>.circleData.y,</span><br><span class="line">        <span class="built_in">this</span>.circleData.z</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">let</span> standardVector = worldVector.project(<span class="built_in">this</span>.camera);</span><br><span class="line">    <span class="keyword">let</span> a = <span class="built_in">this</span>.$window.clientWidth / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="built_in">this</span>.$window.clientHeight / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="built_in">Math</span>.round(standardVector.x * a + a);</span><br><span class="line">    <span class="keyword">let</span> y = <span class="built_in">Math</span>.round(-standardVector.y * b + b);</span><br><span class="line">    <span class="keyword">let</span> Div: HTMLElement = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">    Div.style.left = x + <span class="number">30</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    Div.style.top = y + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>最后在render方法中调用textShow方法即可<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> render(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(<span class="function">() =&gt;</span> <span class="built_in">this</span>.render());</span><br><span class="line">    <span class="built_in">this</span>.textShow();</span><br><span class="line">    <span class="built_in">this</span>.renderer.render(<span class="built_in">this</span>.scene, <span class="built_in">this</span>.camera); <span class="comment">// 必须放在这个位置</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="方法二：使用CSS2DObject和CSS2DRenderer渲染器"><a href="#方法二：使用CSS2DObject和CSS2DRenderer渲染器" class="headerlink" title="方法二：使用CSS2DObject和CSS2DRenderer渲染器"></a>方法二：使用CSS2DObject和CSS2DRenderer渲染器</h1><p>这个方法的原理是将dom元素通过CSS2DObject方法转换为three对象，然后利用CSS2DRenderer渲染器将其渲染在页面上<br>首先引入CSS2DObject和CSS2DRenderer<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CSS2DObject, CSS2DRenderer &#125; <span class="keyword">from</span> <span class="string">&quot;three/examples/jsm/renderers/CSS2DRenderer&quot;</span>;</span><br></pre></td></tr></table></figure><br>接着声明一个CSS2DRenderer<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> labelRenderer: CSS2DRenderer</span><br></pre></td></tr></table></figure><br>新建一个div设置一些类名或者样式，然后将div传入CSS2DObject对象的实例中<br>将实例add进场景，再声明一个CSS2DRenderer，通过setSize方法设置渲染器的大小<br>通过labelRenderer.domElement来设置被转换成three对象之后的dom元素的样式<br>最后将labelRenderer.domElement对象appendChild到你想要的元素中<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Div: HTMLElement = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">Div.id = <span class="string">&#x27;trace&#x27;</span></span><br><span class="line">Div.className = <span class="string">&#x27;text&#x27;</span></span><br><span class="line">Div.textContent = <span class="string">&quot;CSS2D方法&quot;</span></span><br><span class="line"><span class="keyword">var</span> moonLabel = <span class="keyword">new</span> CSS2DObject(Div);</span><br><span class="line">moonLabel.position.set(<span class="number">0</span>, -<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">this</span>.scene.add(moonLabel);</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.labelRenderer = <span class="keyword">new</span> CSS2DRenderer();</span><br><span class="line"><span class="built_in">this</span>.labelRenderer.setSize(<span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight);</span><br><span class="line"><span class="built_in">this</span>.labelRenderer.domElement.style.position = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line"><span class="built_in">this</span>.labelRenderer.domElement.style.top = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span>;        </span><br><span class="line"><span class="built_in">document</span>.body.appendChild(<span class="built_in">this</span>.labelRenderer.domElement)</span><br></pre></td></tr></table></figure><br>最后直接再render方法中执行labelRenderer的render，传入场景和相机<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.labelRenderer.render(<span class="built_in">this</span>.scene, <span class="built_in">this</span>.camera);</span><br></pre></td></tr></table></figure><br>这里有个问题，如果场景有<code>OrbitControls</code>控制器，那么将会失效，因为CSS2DRenderer会先生成有个和渲染大小一样的div（就是setSize方法设置的大小）<br>如果能正常显示出div那么它的<code>z-index</code>是高于WebGLRenderer渲染出的canvas的层级，这样<code>OrbitControls</code>控制器就会失效<br>解决方法也很简单粗暴：给这个生成出来的div给一个<code>pointer-events: none;</code>样式即可</p><p>相比之下，我觉得方案二还是更简单一点，但是如果需要设置多个或不确定数量的div，那么可以使用第一个，使用for循环来处理</p><h1 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h1><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/less/index.less&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; OrbitControls &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/controls/OrbitControls&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Scene, PerspectiveCamera, WebGLRenderer, AmbientLight, DirectionalLight, AnimationMixer, AnimationAction, BoxGeometry, MeshBasicMaterial, Mesh, DoubleSide, Clock, Raycaster, Vector2, Vector3, Group, TextureLoader, Sprite, SpriteMaterial, LoopOnce &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; GLTFLoader, GLTF &#125; <span class="keyword">from</span> <span class="string">&quot;three/examples/jsm/loaders/GLTFLoader&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CSS2DObject, CSS2DRenderer &#125; <span class="keyword">from</span> <span class="string">&quot;three/examples/jsm/renderers/CSS2DRenderer&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Three</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> scene: Scene</span><br><span class="line">    <span class="keyword">private</span> camera: PerspectiveCamera</span><br><span class="line">    <span class="keyword">private</span> renderer: WebGLRenderer</span><br><span class="line">    <span class="keyword">private</span> controls: OrbitControls</span><br><span class="line">    <span class="keyword">private</span> mixer: AnimationMixer</span><br><span class="line">    <span class="keyword">private</span> clock: Clock</span><br><span class="line">    <span class="keyword">private</span> mainGroup: Group</span><br><span class="line">    <span class="keyword">private</span> circleGroup: Group</span><br><span class="line">    <span class="keyword">private</span> $window: HTMLElement</span><br><span class="line">    <span class="keyword">private</span> fov: <span class="built_in">number</span></span><br><span class="line">    <span class="keyword">private</span> originalCamera: Vector3</span><br><span class="line">    <span class="keyword">private</span> circleData: Vector3</span><br><span class="line">    <span class="keyword">private</span> gltf: GLTF</span><br><span class="line">    <span class="keyword">private</span> anindex: <span class="built_in">number</span></span><br><span class="line">    <span class="keyword">private</span> animation: AnimationAction</span><br><span class="line">    <span class="keyword">private</span> isAnimate: <span class="built_in">boolean</span></span><br><span class="line">    <span class="keyword">private</span> labelRenderer: CSS2DRenderer</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fov = <span class="number">26</span></span><br><span class="line">        <span class="built_in">this</span>.originalCamera = <span class="keyword">new</span> Vector3(-<span class="number">2.3363492363063805</span>, <span class="number">5.3542278380602655</span>, <span class="number">13.216669448945213</span>)</span><br><span class="line">        <span class="built_in">this</span>.$window = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.clock = <span class="keyword">new</span> Clock()</span><br><span class="line">        <span class="built_in">this</span>.circleData = <span class="keyword">new</span> Vector3(-<span class="number">0.2</span>, <span class="number">2.3</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">this</span>.anindex = <span class="number">0</span></span><br><span class="line">        <span class="built_in">this</span>.isAnimate = <span class="literal">false</span></span><br><span class="line">        <span class="built_in">this</span>.initScene();</span><br><span class="line">        <span class="built_in">this</span>.initThree();</span><br><span class="line">        <span class="built_in">this</span>.initCamera();</span><br><span class="line">        <span class="built_in">this</span>.initControls()</span><br><span class="line">        <span class="built_in">this</span>.initLight();</span><br><span class="line">        <span class="built_in">this</span>.initPulseCircle()</span><br><span class="line">        <span class="built_in">this</span>.initTrace()</span><br><span class="line">        <span class="built_in">this</span>.render()</span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> <span class="built_in">this</span>.onWindowResize());</span><br><span class="line">        <span class="built_in">this</span>.renderer.domElement.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="params">event</span> =&gt;</span> <span class="built_in">this</span>.modelTrigger(event));</span><br><span class="line">        <span class="built_in">this</span>.renderer.domElement.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function"><span class="params">event</span> =&gt;</span> <span class="built_in">this</span>.modelTrigger(event));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> loader = <span class="keyword">new</span> GLTFLoader(); <span class="comment">//创建模型加载器对象</span></span><br><span class="line">        <span class="comment">// let dracoloader = new DRACOLoader();//draco加载器</span></span><br><span class="line">        <span class="keyword">const</span> textureLoader = <span class="keyword">new</span> TextureLoader();</span><br><span class="line">        <span class="keyword">const</span> skyboxGeometry = <span class="keyword">new</span> BoxGeometry(<span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">        <span class="keyword">const</span> skyboxMaterials = [</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/rt.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/lf.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/up.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/dn.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/bk.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">            <span class="keyword">new</span> MeshBasicMaterial(&#123; <span class="attr">map</span>: textureLoader.load(<span class="string">&#x27;./static/textures/ft.png&#x27;</span>), <span class="attr">side</span>: DoubleSide &#125;),</span><br><span class="line">        ];</span><br><span class="line">        <span class="keyword">const</span> skyboxMesh = <span class="keyword">new</span> Mesh(skyboxGeometry, skyboxMaterials);</span><br><span class="line">        skyboxMesh.name = <span class="string">&#x27;skyboxMesh&#x27;</span>;</span><br><span class="line">        skyboxMesh.position.y = <span class="number">97.45</span></span><br><span class="line">        <span class="built_in">this</span>.scene.add(skyboxMesh);</span><br><span class="line"></span><br><span class="line">        loader.load(<span class="string">&#x27;./static/models/glb/RobotExpressive.glb&#x27;</span>, <span class="function"><span class="params">object</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">object</span>)</span><br><span class="line">            <span class="built_in">this</span>.gltf = <span class="built_in">object</span></span><br><span class="line">            <span class="built_in">this</span>.gltf.scene.position.set(<span class="number">0</span>, -<span class="number">2.5</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">this</span>.scene.add(<span class="built_in">this</span>.gltf.scene);</span><br><span class="line">            <span class="built_in">this</span>.mixer = <span class="keyword">new</span> AnimationMixer(<span class="built_in">this</span>.gltf.scene);</span><br><span class="line">            <span class="built_in">this</span>.selectAnim(<span class="number">5</span>, <span class="string">&#x27;点我的身体会有惊喜!&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&#x27;submit&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.send()</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;input&quot;</span>).addEventListener(<span class="string">&quot;keyup&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            event.preventDefault();</span><br><span class="line">            <span class="keyword">if</span> (event.keyCode === <span class="number">13</span>) &#123;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">&quot;submit&quot;</span>).click();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> send(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> value: <span class="built_in">string</span> = (&lt;HTMLInputElement&gt;<span class="built_in">document</span>.getElementById(<span class="string">&#x27;input&#x27;</span>)).value;</span><br><span class="line">        (&lt;HTMLInputElement&gt;<span class="built_in">document</span>.getElementById(<span class="string">&#x27;input&#x27;</span>)).value = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/跳舞/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/死/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/闲/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">2</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/开心|哈哈|ha/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">3</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/生气/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">4</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/牛|666/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">5</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/你好|hey|hello/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">6</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/是|不/</span>.test(value)) &#123;</span><br><span class="line">            index = <span class="number">7</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            index = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">9</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (index) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">0</span>, <span class="string">&#x27;啦~~啦~~~啦~~~&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">1</span>, <span class="string">&#x27;狗带！&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">2</span>, <span class="string">&#x27;无所事事。。。&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">3</span>, <span class="string">&#x27;开心&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">5</span>, <span class="string">&#x27;好气哦！&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">9</span>, <span class="string">&#x27;你牛逼！&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">12</span>, <span class="string">&#x27;你好！&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">13</span>, <span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">4</span>, <span class="string">&#x27;你说什么我听不懂？&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">4</span>, <span class="string">&#x27;你说什么我听不懂？&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> modelTrigger(event): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> Sx = event.clientX; <span class="comment">//鼠标单击位置横坐标</span></span><br><span class="line">        <span class="keyword">const</span> Sy = event.clientY; <span class="comment">//鼠标单击位置纵坐标</span></span><br><span class="line">        <span class="comment">//屏幕坐标转标准设备坐标</span></span><br><span class="line">        <span class="keyword">const</span> x = (Sx / <span class="built_in">window</span>.innerWidth) * <span class="number">2</span> - <span class="number">1</span>; <span class="comment">//标准设备横坐标</span></span><br><span class="line">        <span class="keyword">const</span> y = -(Sy / <span class="built_in">window</span>.innerHeight) * <span class="number">2</span> + <span class="number">1</span>; <span class="comment">//标准设备纵坐标</span></span><br><span class="line">        <span class="comment">//创建射线投射器对象</span></span><br><span class="line">        <span class="keyword">const</span> raycaster = <span class="keyword">new</span> Raycaster();</span><br><span class="line">        <span class="comment">//返回射线选中的对象</span></span><br><span class="line">        raycaster.setFromCamera(<span class="keyword">new</span> Vector2(x, y), <span class="built_in">this</span>.camera);</span><br><span class="line">        <span class="keyword">const</span> intersects = raycaster.intersectObjects(<span class="built_in">this</span>.scene.children, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">const</span> intersect = intersects.filter(<span class="function"><span class="params">intersect</span> =&gt;</span> intersect.object.name !== <span class="string">&#x27;skyboxMesh&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (intersect.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> result = intersect.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.object.name === <span class="string">&#x27;Torso_0&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (result.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.selectAnim(<span class="number">5</span>, <span class="string">&#x27;不要乱摸&#x27;</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">switch</span> (intersect[<span class="number">0</span>].object.name) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;Head_1&#x27;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.selectAnim(<span class="number">3</span>, <span class="string">&#x27;摸头杀&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;Head_2&#x27;</span>:</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">&#x27;头&#x27;</span>)</span><br><span class="line">                    <span class="built_in">this</span>.selectAnim(<span class="number">1</span>, <span class="string">&#x27;我的眼睛！！&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;Torso_1&#x27;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.selectAnim(<span class="number">12</span>, <span class="string">&#x27;给我捶捶背&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;FootL&#x27;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.selectAnim(<span class="number">3</span>, <span class="string">&#x27;左脚可以摸&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;FootR&#x27;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.selectAnim(<span class="number">5</span>, <span class="string">&#x27;别碰我的jiong&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="attr">default</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> selectAnim(index: <span class="built_in">number</span>, text?: <span class="built_in">string</span>, loop?: <span class="built_in">boolean</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.isAnimate) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.isAnimate = <span class="literal">true</span></span><br><span class="line">        <span class="comment">// animation</span></span><br><span class="line">        <span class="built_in">this</span>.mixer.uncacheClip(<span class="built_in">this</span>.gltf.animations[<span class="built_in">this</span>.anindex])</span><br><span class="line">        <span class="built_in">this</span>.animation = <span class="built_in">this</span>.mixer.clipAction(<span class="built_in">this</span>.gltf.animations[index])</span><br><span class="line">        <span class="built_in">this</span>.animation.clampWhenFinished = <span class="literal">true</span>;   <span class="comment">//播放完停留在最后一帧</span></span><br><span class="line">        <span class="keyword">if</span> (!loop) &#123;</span><br><span class="line">            <span class="built_in">this</span>.animation.setLoop(LoopOnce, <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.animation.fadeIn(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">this</span>.animation.play()</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isAnimate = <span class="literal">false</span></span><br><span class="line">        &#125;, <span class="built_in">this</span>.gltf.animations[index].duration * <span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">this</span>.anindex = index</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>).innerText = text</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建场景</span></span><br><span class="line">    <span class="keyword">private</span> initScene(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.scene = <span class="keyword">new</span> Scene();</span><br><span class="line">        <span class="built_in">this</span>.scene.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.scene.lookAt(<span class="built_in">this</span>.scene.position);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建相机</span></span><br><span class="line">    <span class="keyword">private</span> initCamera(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.camera = <span class="keyword">new</span> PerspectiveCamera(</span><br><span class="line">            <span class="built_in">this</span>.fov,</span><br><span class="line">            <span class="built_in">this</span>.$window.clientWidth / <span class="built_in">this</span>.$window.clientHeight,</span><br><span class="line">            <span class="number">0.1</span>,</span><br><span class="line">            <span class="number">5000</span></span><br><span class="line">        );</span><br><span class="line">        <span class="built_in">this</span>.camera.position.x = <span class="built_in">this</span>.originalCamera.x</span><br><span class="line">        <span class="built_in">this</span>.camera.position.y = <span class="built_in">this</span>.originalCamera.y</span><br><span class="line">        <span class="built_in">this</span>.camera.position.z = <span class="built_in">this</span>.originalCamera.z</span><br><span class="line">        <span class="built_in">this</span>.camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建3D渲染器</span></span><br><span class="line">    <span class="keyword">private</span> initThree(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.renderer = <span class="keyword">new</span> WebGLRenderer();</span><br><span class="line">        <span class="built_in">this</span>.renderer.setSize(</span><br><span class="line">            <span class="built_in">this</span>.$window.clientWidth,</span><br><span class="line">            <span class="built_in">this</span>.$window.clientHeight</span><br><span class="line">        );</span><br><span class="line">        <span class="built_in">this</span>.renderer.setSize(<span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight);</span><br><span class="line">        <span class="built_in">this</span>.renderer.setClearColor(<span class="number">0xb34149</span>, <span class="number">1</span>); <span class="comment">//设置背景颜色</span></span><br><span class="line">        <span class="built_in">this</span>.$window.appendChild(<span class="built_in">this</span>.renderer.domElement);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建光源</span></span><br><span class="line">    <span class="keyword">private</span> initLight(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="comment">// 环境光</span></span><br><span class="line">        <span class="built_in">this</span>.scene.add(<span class="keyword">new</span> AmbientLight(<span class="number">0xd29c96</span>, <span class="number">1</span>));</span><br><span class="line">        <span class="comment">// 平行光</span></span><br><span class="line">        <span class="keyword">let</span> light = <span class="keyword">new</span> DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.6</span>);</span><br><span class="line">        light.position.set(<span class="number">0</span>, <span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="built_in">this</span>.scene.add(light);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开启控制器</span></span><br><span class="line">    <span class="keyword">private</span> initControls(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.controls = <span class="keyword">new</span> OrbitControls(<span class="built_in">this</span>.camera, <span class="built_in">this</span>.renderer.domElement);</span><br><span class="line">        <span class="built_in">this</span>.controls.enableDamping = <span class="literal">true</span>; <span class="comment">// 惯性滑动，滑动大小默认0.25</span></span><br><span class="line">        <span class="built_in">this</span>.controls.dampingFactor = <span class="number">0.05</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// //控制</span></span><br><span class="line">        <span class="built_in">this</span>.controls.enableZoom = <span class="literal">true</span>; <span class="comment">// 缩放</span></span><br><span class="line">        <span class="built_in">this</span>.controls.enableKeys = <span class="literal">true</span>; <span class="comment">// 键盘</span></span><br><span class="line">        <span class="built_in">this</span>.controls.enablePan = <span class="literal">false</span>; <span class="comment">// 是否开启右键拖拽</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 旋转速度</span></span><br><span class="line">        <span class="built_in">this</span>.controls.rotateSpeed = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自动旋转</span></span><br><span class="line">        <span class="built_in">this</span>.controls.autoRotate = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">this</span>.controls.autoRotateSpeed = -<span class="number">0.01</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置仰视角和俯视角,后续进行重置</span></span><br><span class="line">        <span class="built_in">this</span>.controls.maxPolarAngle = <span class="built_in">Math</span>.PI / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">this</span>.controls.minPolarAngle = <span class="built_in">Math</span>.PI / <span class="number">4</span>;</span><br><span class="line">        <span class="built_in">this</span>.controls.zoomSpeed = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//设置相机距离原点的最远距离</span></span><br><span class="line">        <span class="comment">// controls.minDistance = 120;</span></span><br><span class="line">        <span class="comment">//设置相机距离原点的最远距离</span></span><br><span class="line">        <span class="comment">// controls.maxDistance = 120 + 120 * 0.5;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建发光点</span></span><br><span class="line">    <span class="keyword">private</span> initPulseCircle(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mainGroup = <span class="keyword">new</span> Group();</span><br><span class="line">        <span class="built_in">this</span>.scene.add(<span class="built_in">this</span>.mainGroup);</span><br><span class="line">        <span class="keyword">var</span> spriteMap = <span class="keyword">new</span> TextureLoader().load(<span class="string">&quot;./static/img/img.png&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> pinMaterial = <span class="keyword">new</span> SpriteMaterial(&#123;</span><br><span class="line">            <span class="attr">map</span>: spriteMap</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">this</span>.circleGroup = <span class="keyword">new</span> Group();</span><br><span class="line">        <span class="keyword">let</span> container = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        container.className = <span class="string">&#x27;show&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> Div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        Div.className = <span class="string">&#x27;text&#x27;</span></span><br><span class="line">        Div.id = <span class="string">&quot;text&quot;</span></span><br><span class="line">        Div.style.left = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">        Div.style.top = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(Div)</span><br><span class="line">        <span class="keyword">let</span> pin: Sprite = <span class="keyword">new</span> Sprite(pinMaterial);</span><br><span class="line">        pin.position.set(</span><br><span class="line">            <span class="built_in">this</span>.circleData.x,</span><br><span class="line">            <span class="built_in">this</span>.circleData.y,</span><br><span class="line">            <span class="built_in">this</span>.circleData.z</span><br><span class="line">        );</span><br><span class="line">        pin.scale.set(<span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">this</span>.circleGroup.add(pin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 发光点DOM文本</span></span><br><span class="line">    <span class="keyword">private</span> textShow(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> worldVector = <span class="keyword">new</span> Vector3(</span><br><span class="line">            <span class="built_in">this</span>.circleData.x,</span><br><span class="line">            <span class="built_in">this</span>.circleData.y,</span><br><span class="line">            <span class="built_in">this</span>.circleData.z</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">let</span> standardVector = worldVector.project(<span class="built_in">this</span>.camera);</span><br><span class="line">        <span class="keyword">let</span> a = <span class="built_in">this</span>.$window.clientWidth / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">let</span> b = <span class="built_in">this</span>.$window.clientHeight / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">let</span> x = <span class="built_in">Math</span>.round(standardVector.x * a + a);</span><br><span class="line">        <span class="keyword">let</span> y = <span class="built_in">Math</span>.round(-standardVector.y * b + b);</span><br><span class="line">        <span class="keyword">let</span> Div: HTMLElement = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">        Div.style.left = x + <span class="number">30</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        Div.style.top = y + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> initTrace(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> Div: HTMLElement = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        Div.id = <span class="string">&#x27;trace&#x27;</span></span><br><span class="line">        Div.className = <span class="string">&#x27;text&#x27;</span></span><br><span class="line">        Div.textContent = <span class="string">&quot;Moon&quot;</span></span><br><span class="line">        <span class="keyword">var</span> moonLabel = <span class="keyword">new</span> CSS2DObject(Div);</span><br><span class="line">        moonLabel.position.set(<span class="number">0</span>, -<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.scene.add(moonLabel);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.labelRenderer = <span class="keyword">new</span> CSS2DRenderer();</span><br><span class="line">        <span class="built_in">this</span>.labelRenderer.setSize(<span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight);</span><br><span class="line">        <span class="built_in">this</span>.labelRenderer.domElement.style.position = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">        <span class="built_in">this</span>.labelRenderer.domElement.style.top = <span class="number">0</span> + <span class="string">&#x27;px&#x27;</span>;        </span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(<span class="built_in">this</span>.labelRenderer.domElement)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> render(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(<span class="function">() =&gt;</span> <span class="built_in">this</span>.render());</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.mixer) &#123;</span><br><span class="line">            <span class="built_in">this</span>.mixer.update(<span class="built_in">this</span>.clock.getDelta());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.controls.update();</span><br><span class="line">        <span class="built_in">this</span>.textShow();</span><br><span class="line">        <span class="built_in">this</span>.renderer.render(<span class="built_in">this</span>.scene, <span class="built_in">this</span>.camera); <span class="comment">// 必须放在这个位置</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">this</span>.labelRenderer.render(<span class="built_in">this</span>.scene, <span class="built_in">this</span>.camera);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> onWindowResize(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.renderer.setSize(<span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight);</span><br><span class="line">        <span class="built_in">this</span>.camera.aspect = <span class="built_in">window</span>.innerWidth / <span class="built_in">window</span>.innerHeight;</span><br><span class="line">        <span class="built_in">this</span>.camera.updateProjectionMatrix();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;方法一：使用Sprite对象&quot;&gt;&lt;a href=&quot;#方法一：使用Sprite对象&quot; class=&quot;headerlink&quot; title=&quot;方法一：使用Sprite对象&quot;&gt;&lt;/a&gt;方法一：使用Sprite对象&lt;/h1&gt;&lt;p&gt;首先实例化一个SpriteMaterial，
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/categories/JS/three-js/"/>
    
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/tags/three-js/"/>
    
      <category term="threejs" scheme="https://hakunamatata052.github.io/tags/threejs/"/>
    
      <category term="three" scheme="https://hakunamatata052.github.io/tags/three/"/>
    
  </entry>
  
  <entry>
    <title>当年的元歌比露娜还秀</title>
    <link href="https://hakunamatata052.github.io/2020/08/25/yuange/"/>
    <id>https://hakunamatata052.github.io/2020/08/25/yuange/</id>
    <published>2020-08-25T08:25:36.000Z</published>
    <updated>2020-08-26T07:38:10.000Z</updated>
    
    <content type="html"><![CDATA[<video src="/2020/08/25/yuange/4852abda01b06d0270ff57cff566085c.mp4" controls style="display:block;margin:auto"></video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;video src=&quot;/2020/08/25/yuange/4852abda01b06d0270ff57cff566085c.mp4&quot; controls style=&quot;display:block;margin:auto&quot;&gt;&lt;/video&gt;
      
    
    </summary>
    
      <category term="日常" scheme="https://hakunamatata052.github.io/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
      <category term="元歌 王者荣耀" scheme="https://hakunamatata052.github.io/tags/%E5%85%83%E6%AD%8C-%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/"/>
    
  </entry>
  
  <entry>
    <title>快速搭建webpack4.0+</title>
    <link href="https://hakunamatata052.github.io/2020/08/25/webpack/"/>
    <id>https://hakunamatata052.github.io/2020/08/25/webpack/</id>
    <published>2020-08-25T06:14:00.000Z</published>
    <updated>2020-08-25T08:43:38.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="初始化npm"><a href="#初始化npm" class="headerlink" title="初始化npm"></a>初始化npm</h3><p>使用-y来快速创建<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></p><h3 id="安装webpack和webpack-cli脚手架"><a href="#安装webpack和webpack-cli脚手架" class="headerlink" title="安装webpack和webpack-cli脚手架"></a>安装webpack和webpack-cli脚手架</h3><p>从webpack4.0开始，webpack打包工具和命令行工具就开成两个包了，需要同时安装<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure></p><h3 id="创建工程目录"><a href="#创建工程目录" class="headerlink" title="创建工程目录"></a>创建工程目录</h3><p>新建src目录，之后写的js、html、css等源文件放在这里,在src目录下新建一个index.js作为入口文件<br><code>src/index.js</code>是webpack默认的入口文件目录，因为不需要单独配置，如果不想使用这个路径，需要在<code>webpack.config.js</code>中单独配置<br>此处目录结构应为</p><ul><li>node_modules</li><li>src<ul><li>index.js</li></ul></li><li>package.json</li></ul><h3 id="安装webpack-dev-server"><a href="#安装webpack-dev-server" class="headerlink" title="安装webpack-dev-server"></a>安装webpack-dev-server</h3><p>此时webpack只能每次执行打包命令后才能看到打包结果，开发过程中我们需要实时编译，因此需要一个本地服务<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure></p><h3 id="安装html-webpack-plugin插件"><a href="#安装html-webpack-plugin插件" class="headerlink" title="安装html-webpack-plugin插件"></a>安装html-webpack-plugin插件</h3><p>虽然现在可以试试打包js，但是我们的html依然不能进行热更新，而且打包上线时，打包的资源文件一般会进行哈希命名，每次打包手动修改index.html文件中的资源文件名着实很费劲<br>因此需要html-webpack-plugin插件帮我们自动完成资源引用并增加热更新功能<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure><br>安装好后在项目根目录下新建<code>webpack.config.js</code>文件，并设置html-webpack-plugin的对应html模板<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports =&#123;</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            <span class="attr">filename</span>:<span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">            <span class="attr">template</span>:<span class="string">&quot;./src/index.html&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>在src下新建index.html文件<br>之后目录应为</p><ul><li>node_modules</li><li>src<ul><li>index.js</li><li>index.html</li></ul></li><li>package.json</li><li>webpack.config.js</li></ul><h3 id="新增命令行"><a href="#新增命令行" class="headerlink" title="新增命令行"></a>新增命令行</h3><p>在<code>package.json</code>的scripts中新增一个命令<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>:<span class="string">&quot;webpack-dev-server --host 192.168.0.2 --hot --https --port 80 --open&quot;</span>,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><br>其中<br><code>--host 192.138.0.2</code>表示配置本地服务的ip<br><code>--hot</code>表示开启热更新模式<br><code>--https</code>表示开始https<br><code>--port 80</code>表示端口为80<br><code>--open</code>表示启动后自动打开游览器，后面可以跟游览器的标识，不写表示打开默认游览器<br>到此本地服务就搭建完毕了，接下来需要配置loader和打包选项，今天先更到这里</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;初始化npm&quot;&gt;&lt;a href=&quot;#初始化npm&quot; class=&quot;headerlink&quot; title=&quot;初始化npm&quot;&gt;&lt;/a&gt;初始化npm&lt;/h3&gt;&lt;p&gt;使用-y来快速创建&lt;br&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;tabl
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="webpack" scheme="https://hakunamatata052.github.io/categories/JS/webpack/"/>
    
    
      <category term="webpack" scheme="https://hakunamatata052.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Promise和async/await</title>
    <link href="https://hakunamatata052.github.io/2020/08/25/promise/"/>
    <id>https://hakunamatata052.github.io/2020/08/25/promise/</id>
    <published>2020-08-25T03:18:00.000Z</published>
    <updated>2022-01-05T07:51:52.324Z</updated>
    
    <content type="html"><![CDATA[<h3 id="为什么要用Promise"><a href="#为什么要用Promise" class="headerlink" title="为什么要用Promise"></a>为什么要用Promise</h3><p>一般情况我们一次性调用API就可以完成请求。<br>有些情况需要多次调用服务器API，就会形成一个链式调用，比如为了完成一个功能，我们需要调用API1、API2、API3，依次按照顺序进行调用，这个时候就会出现回调地狱的问题</p><h3 id="Promise的链式结构"><a href="#Promise的链式结构" class="headerlink" title="Promise的链式结构"></a>Promise的链式结构</h3><p>使用Promise可以做到链式结构，即一个请求结束后在then方法中执行下一个异步请求，再下一个异步请求放在上一个异步请求的then方法中,但是需要再每个then方法中return一个Promise对象<br>这样我们就得到了一个扁平的结构而不是回调套回调。<br>eg.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">        res()</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res2, rej2</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">            res2()</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res3, rej4</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">            res3()</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;结束&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>执行结果是<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure></p><h3 id="使用all方法"><a href="#使用all方法" class="headerlink" title="使用all方法"></a>使用all方法</h3><p>但是通常在真是项目中，每个请求会有单独的方法封装，而且每个Promise会有独立的then方法，这时可以使用Promise对象的all方法<br>他表示无论三个异步请求谁先执行谁后执行，都等待三个异步请求全部结束后执行all中的函数。<br>如果后一个请求需要得到前一个请求中的数据，那么还是需要使用前面的链式结构才行。<br>如果既要使用已经封装好的Promise函数，有需要按步调用，可以使用ES7中的async/await<br>eg.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">        res()</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">        res()</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">        res()</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Promise</span>.all([promise1, promise2, promise3]).then(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;结束&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>执行结果是<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure></p><h3 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h3><p>首先封装的方法需要return一个Promise对象，接着在请求的函数前面添加async关键字，在请求函数的内部使用变量或常量接受封装的Promise对象即可，但是封装的Promise对象前需要加await<br>这时接收到的结果就是Promise对象中then方法中return的结果<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            resolve(<span class="string">&quot;666&quot;</span>)</span><br><span class="line">        &#125;, <span class="number">5000</span>);</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">ajaxAsync</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">await</span> ajax()    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(r)    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">ajaxAsync()</span><br></pre></td></tr></table></figure><br>执行结果是<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span>  <span class="comment">// 5s后</span></span><br><span class="line"><span class="number">666</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;为什么要用Promise&quot;&gt;&lt;a href=&quot;#为什么要用Promise&quot; class=&quot;headerlink&quot; title=&quot;为什么要用Promise&quot;&gt;&lt;/a&gt;为什么要用Promise&lt;/h3&gt;&lt;p&gt;一般情况我们一次性调用API就可以完成请求。&lt;br&gt;有些情况
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
    
      <category term="Promise async/await async await 同步异步 异步" scheme="https://hakunamatata052.github.io/tags/Promise-async-await-async-await-%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5-%E5%BC%82%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>Three.js 入门</title>
    <link href="https://hakunamatata052.github.io/2020/08/24/three.js/"/>
    <id>https://hakunamatata052.github.io/2020/08/24/three.js/</id>
    <published>2020-08-24T08:21:00.000Z</published>
    <updated>2022-01-05T07:51:52.455Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装three-js"><a href="#安装three-js" class="headerlink" title="安装three.js"></a>安装three.js</h3><p>使用npm安装three.js<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i three -S</span><br></pre></td></tr></table></figure><br>导入场景、相机、灯光、渲染器等类<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Scene, PerspectiveCamera, WebGLRenderer ,AmbientLight ,DirectionalLight&#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br></pre></td></tr></table></figure><br>创建并暴露一个类，定义场景、相机、灯光等，并设置渲染的DOM容器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Three</span> </span>&#123;</span><br><span class="line">    private scene: Scene</span><br><span class="line">    private camera: PerspectiveCamera</span><br><span class="line">    private renderer: WebGLRenderer</span><br><span class="line">    private $window: HTMLElement</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$window = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建场景"><a href="#创建场景" class="headerlink" title="创建场景"></a>创建场景</h3><p>初始化一个场景,这里我设置了一个私有方法，之后会在constructor中调用<br>scene.position.set可以设置场景在坐标系的位置<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建场景</span></span><br><span class="line">private initScene(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.scene = <span class="keyword">new</span> Scene();</span><br><span class="line">    <span class="built_in">this</span>.scene.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">this</span>.scene.lookAt(<span class="built_in">this</span>.scene.position);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="创建相机"><a href="#创建相机" class="headerlink" title="创建相机"></a>创建相机</h3><p>接着初始化相机,这里使用的是透视相机PerspectiveCamera，相机接受4个参数，分别是</p><ul><li>PerspectiveCamera(fov, aspect, near, far)</li><li>Fov – 相机的视锥体的垂直视野角</li><li>Aspect – 相机视锥体的长宽比</li><li>Near – 相机视锥体的近平面</li><li>Far – 相机视锥体的远平面<br>相机的位置可以使用camera.position.x，camera.position.y，camera.position.z进行赋值来改变<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建相机</span></span><br><span class="line">private initCamera(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.camera = <span class="keyword">new</span> PerspectiveCamera(</span><br><span class="line">        <span class="number">25</span>,</span><br><span class="line">        <span class="built_in">this</span>.$window.clientWidth / <span class="built_in">this</span>.$window.clientHeight,</span><br><span class="line">        <span class="number">0.1</span>,</span><br><span class="line">        <span class="number">1000</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">this</span>.camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建光源"><a href="#创建光源" class="headerlink" title="创建光源"></a>创建光源</h3>接着初始化灯光,这里添加了两个灯光，一个环境光，一个平行光，可添加多个光源<br>灯光的构造函数中传入灯光颜色和透明度，颜色必须是0x+16进制色<br>环境光没有位置属性，平行光可以添加光源的位置，使用light.position.set来设置位置，传入三个参数分别是x坐标，y坐标，z坐标<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建光源</span></span><br><span class="line">private initLight(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="comment">// 环境光</span></span><br><span class="line">    <span class="built_in">this</span>.scene.add(<span class="keyword">new</span> AmbientLight(<span class="number">0xd29c96</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="comment">// 平行光</span></span><br><span class="line">    <span class="keyword">let</span> light = <span class="keyword">new</span> DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.6</span>);</span><br><span class="line">    light.position.set(<span class="number">0</span>, <span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">this</span>.scene.add(light);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建3D渲染器"><a href="#创建3D渲染器" class="headerlink" title="创建3D渲染器"></a>创建3D渲染器</h3>接着创建渲染器,使用three内置的WebGLRenderer渲染器来渲染，渲染器可以通过setSize方法设置大小，这里我们设置一个和画布一样大的渲染器，如果渲染尺寸小于画布大小，则超出渲染器大小的位置将不被渲染<br>使用setClearColor方法可以设置渲染区域的背景色<br>最后将渲染器的domElement属性appendChild进需要的DOM标签内即可<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建3D渲染器</span></span><br><span class="line">private initThree(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.renderer = <span class="keyword">new</span> WebGLRenderer();</span><br><span class="line">    <span class="built_in">this</span>.renderer.setSize(</span><br><span class="line">        <span class="built_in">this</span>.$window.clientWidth,</span><br><span class="line">        <span class="built_in">this</span>.$window.clientHeight</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">this</span>.renderer.setClearColor(<span class="number">0xb34149</span>, <span class="number">1</span>); <span class="comment">//设置背景颜色</span></span><br><span class="line">    <span class="built_in">this</span>.$window.appendChild(<span class="built_in">this</span>.renderer.domElement);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>接着将这些方法添加进constructor内，让实例创建时自动执行<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Three</span> </span>&#123;</span><br><span class="line">    private scene: Scene</span><br><span class="line">    private camera: PerspectiveCamera</span><br><span class="line">    private renderer: WebGLRenderer</span><br><span class="line">    private $window: HTMLElement</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$window = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#app&quot;</span>);        </span><br><span class="line">        <span class="built_in">this</span>.initScene();</span><br><span class="line">        <span class="built_in">this</span>.initThree();</span><br><span class="line">        <span class="built_in">this</span>.initCamera();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="开启控制器"><a href="#开启控制器" class="headerlink" title="开启控制器"></a>开启控制器</h3>接着使用renderer.render方法就可以渲染了，但是这样只能渲染一帧画面，我们需要做鼠标控制，或者3D动画是需要实时渲染的<br>例如加一个鼠标控制<br>首先导入控制器<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; OrbitControls &#125; <span class="keyword">from</span> <span class="string">&#x27;three/examples/jsm/controls/OrbitControls&#x27;</span>;</span><br></pre></td></tr></table></figure>接着初始化这个控制器，这里依然使用一个方法,然后添加进constructor<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启控制器</span></span><br><span class="line">private initControls(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.controls = <span class="keyword">new</span> OrbitControls(<span class="built_in">this</span>.camera, <span class="built_in">this</span>.renderer.domElement);</span><br><span class="line">    <span class="built_in">this</span>.controls.enableDamping = <span class="literal">true</span>; <span class="comment">// 惯性滑动，滑动大小默认0.25</span></span><br><span class="line">    <span class="built_in">this</span>.controls.dampingFactor = <span class="number">0.05</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// //控制</span></span><br><span class="line">    <span class="built_in">this</span>.controls.enableZoom = <span class="literal">false</span>; <span class="comment">// 缩放</span></span><br><span class="line">    <span class="built_in">this</span>.controls.enableKeys = <span class="literal">false</span>; <span class="comment">// 键盘</span></span><br><span class="line">    <span class="built_in">this</span>.controls.enablePan = <span class="literal">false</span>; <span class="comment">// 是否开启右键拖拽</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 旋转速度</span></span><br><span class="line">    <span class="built_in">this</span>.controls.rotateSpeed = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自动旋转</span></span><br><span class="line">    <span class="built_in">this</span>.controls.autoRotate = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.controls.autoRotateSpeed = -<span class="number">0.01</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置仰视角和俯视角,后续进行重置</span></span><br><span class="line">    <span class="built_in">this</span>.controls.maxPolarAngle = <span class="built_in">Math</span>.PI / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">this</span>.controls.minPolarAngle = <span class="built_in">Math</span>.PI / <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">this</span>.controls.zoomSpeed = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//设置相机距离原点的最远距离</span></span><br><span class="line">    <span class="comment">// controls.minDistance = 120;</span></span><br><span class="line">    <span class="comment">//设置相机距离原点的最远距离</span></span><br><span class="line">    <span class="comment">// controls.maxDistance = 120 + 120 * 0.5;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h3>这样添加的控制器虽然可以控制场景，但是画布不会重新渲染，所以我们需要添加一个渲染函数并且每次调用自身来更新画面<br>这里使用的是requestAnimationFrame函数来调用自身，也可以使用setInterval但是setInterval是固定时间渲染，如果场景过大，过复杂，可能时间到了还没渲染好又得渲染下一帧，这样会导致页面卡死<br>requestAnimationFrame没有固定时间，他会在当前帧渲染完毕后执行下一次，这样就不会导致页面卡死了<br>接着在render方法中使用controls.update()来更新每次的控制，使用renderer.render来更新画面<br>最后在constructor函数中调用render即可<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">private render(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(<span class="function">() =&gt;</span> <span class="built_in">this</span>.render());</span><br><span class="line">    <span class="built_in">this</span>.controls.update();</span><br><span class="line">    <span class="built_in">this</span>.renderer.render(<span class="built_in">this</span>.scene, <span class="built_in">this</span>.camera);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>最后在需要需要的地方导入并new Three()就可以了</li></ul><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><iframe src="/2020/08/24/three.js/three.html" width="600" height="600" frameborder="no" border="0" marginwidth="0" marginheight="0" allowtransparency="yes"></iframe>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;安装three-js&quot;&gt;&lt;a href=&quot;#安装three-js&quot; class=&quot;headerlink&quot; title=&quot;安装three.js&quot;&gt;&lt;/a&gt;安装three.js&lt;/h3&gt;&lt;p&gt;使用npm安装three.js&lt;br&gt;&lt;figure class=&quot;high
      
    
    </summary>
    
      <category term="JS" scheme="https://hakunamatata052.github.io/categories/JS/"/>
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/categories/JS/three-js/"/>
    
    
      <category term="three.js" scheme="https://hakunamatata052.github.io/tags/three-js/"/>
    
      <category term="threejs" scheme="https://hakunamatata052.github.io/tags/threejs/"/>
    
      <category term="three" scheme="https://hakunamatata052.github.io/tags/three/"/>
    
  </entry>
  
  <entry>
    <title>制作菱形图片遮罩</title>
    <link href="https://hakunamatata052.github.io/2019/03/01/mark/"/>
    <id>https://hakunamatata052.github.io/2019/03/01/mark/</id>
    <published>2019-03-01T02:56:52.000Z</published>
    <updated>2022-01-05T07:51:52.364Z</updated>
    
    <content type="html"><![CDATA[<h1 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h1><p>使用box-shadow制作菱形遮罩</p><p>需要在原有结构内增加一个shaow遮罩层</p><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://picsum.photos/300/300&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shadow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>外层div设置相对定位position: relative;<br>将shadow层旋转45度，并设置阴影；<br>box-shadow中的值分别是：<br>box-shadow：水平位移 垂直位移 阴影宽度 模糊程度 颜色<br>这里水平和垂直位移这只为0，即从中间开始向四周出现阴影。 阴影宽度一定要宽于外框，模糊程度可以填0，即不模糊，颜色填白色。</p><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.shadow</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">200px</span> <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><iframe src="/2019/03/01/mark/mark.html" width="600" height="600" frameborder="no" border="0" marginwidth="0" marginheight="0" allowtransparency="yes"></iframe><h1 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h1><p>使用两次旋转达到菱形效果</p><h3 id="HTML-1"><a href="#HTML-1" class="headerlink" title="HTML"></a>HTML</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://picsum.photos/300/300&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSS-1"><a href="#CSS-1" class="headerlink" title="CSS"></a>CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">250px</span>;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h3><iframe src="/2019/03/01/mark/mark2.html" width="650" height="500" frameborder="no" border="0" marginwidth="0" marginheight="0" allowtransparency="yes"></iframe>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;方法一&quot;&gt;&lt;a href=&quot;#方法一&quot; class=&quot;headerlink&quot; title=&quot;方法一&quot;&gt;&lt;/a&gt;方法一&lt;/h1&gt;&lt;p&gt;使用box-shadow制作菱形遮罩&lt;/p&gt;
&lt;p&gt;需要在原有结构内增加一个shaow遮罩层&lt;/p&gt;
&lt;h3 id=&quot;HTML&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="CSS" scheme="https://hakunamatata052.github.io/categories/CSS/"/>
    
    
      <category term="CSS CSS3" scheme="https://hakunamatata052.github.io/tags/CSS-CSS3/"/>
    
  </entry>
  
  <entry>
    <title>科学上网（翻墙）神器【蓝灯】</title>
    <link href="https://hakunamatata052.github.io/2019/01/21/lantern/"/>
    <id>https://hakunamatata052.github.io/2019/01/21/lantern/</id>
    <published>2019-01-21T01:08:46.000Z</published>
    <updated>2022-01-05T07:51:52.364Z</updated>
    
    <content type="html"><![CDATA[<p>给大家介绍一款免费限制流量的科学上网神器<strong>蓝灯lantren</strong><br>下载地址：<a href="https://github.com/HakunaMatata052/lantern-binaries">Github</a><br>里面包含Windows，Android，macOS三个版本。<br>点击对应拓展名文件进入下载即可</p><h2 id="以Windows为例"><a href="#以Windows为例" class="headerlink" title="以Windows为例"></a>以Windows为例</h2><p>点击3.0最新版的exe文件<br><img src="/2019/01/21/lantern/01.png" class=""></p><p>点击download下载<br></p><p>下载先来后双击安装即可。<br><img src="/2019/01/21/lantern/03.jpg" class=""><br>速度还可以~~</p><p>每个月有500MB的免费流量，可以升级到专业版，不限制流量。<br>博主500MB基本足够。<br>而且他采用的是只能切换线路，如果访问的是国内站点，是不通过VPN的，也不会消耗流量。只有当你访问被墙网站的时候才会切换vpn线路。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;给大家介绍一款免费限制流量的科学上网神器&lt;strong&gt;蓝灯lantren&lt;/strong&gt;&lt;br&gt;下载地址：&lt;a href=&quot;https://github.com/HakunaMatata052/lantern-binaries&quot;&gt;Github&lt;/a&gt;&lt;br&gt;里面包含Wi
      
    
    </summary>
    
    
      <category term="科学上网" scheme="https://hakunamatata052.github.io/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="翻墙" scheme="https://hakunamatata052.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>一句代码解决bootstrap栅格几个设置5等分</title>
    <link href="https://hakunamatata052.github.io/2019/01/04/bootstrap-offset/"/>
    <id>https://hakunamatata052.github.io/2019/01/04/bootstrap-offset/</id>
    <published>2019-01-04T07:45:01.000Z</published>
    <updated>2020-08-21T02:57:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>HTML<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-offset-1 col-xs-2 text-center&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-2 text-center&quot;</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-2 text-center&quot;</span>&gt;</span>番茄<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-2 text-center&quot;</span>&gt;</span>石榴<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-2 text-center&quot;</span>&gt;</span>芒果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br>正常设置每个栅格2等分，最后会在末尾空余出2等分（共12等分），然后第一个栅格设置col-xs-offset-1，意思是偏移一格，等于把最后的2等分其中一份放在最前面了。<br>这样做可以解决bootstrap栅格5等分的问题，但是最终宽度会比正常窄，可以单独设置container的宽来解决。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;HTML&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;
      
    
    </summary>
    
      <category term="HTML" scheme="https://hakunamatata052.github.io/categories/HTML/"/>
    
      <category term="BOOTSTRAP" scheme="https://hakunamatata052.github.io/categories/HTML/BOOTSTRAP/"/>
    
    
      <category term="bootstrap" scheme="https://hakunamatata052.github.io/tags/bootstrap/"/>
    
      <category term="offset" scheme="https://hakunamatata052.github.io/tags/offset/"/>
    
  </entry>
  
  <entry>
    <title>This is dobby!</title>
    <link href="https://hakunamatata052.github.io/2019/01/03/dobby/"/>
    <id>https://hakunamatata052.github.io/2019/01/03/dobby/</id>
    <published>2019-01-03T09:22:09.000Z</published>
    <updated>2020-08-26T07:38:04.000Z</updated>
    
    <content type="html"><![CDATA[<p><video src="/2019/01/03/dobby/3bc53ac5ca4fde47810af8abb0c0a601.mp4" controls style="display:block;margin:auto"></video><br>这就是Dobby Orz.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;video src=&quot;/2019/01/03/dobby/3bc53ac5ca4fde47810af8abb0c0a601.mp4&quot; controls style=&quot;display:block;margin:auto&quot;&gt;&lt;/video&gt;&lt;br&gt;这就是Dobby Orz.&lt;
      
    
    </summary>
    
      <category term="日常" scheme="https://hakunamatata052.github.io/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
  </entry>
  
  <entry>
    <title>如何使用fonts.googleapis.com使自己的网站增加更多字体</title>
    <link href="https://hakunamatata052.github.io/2019/01/02/fonts-googleapis/"/>
    <id>https://hakunamatata052.github.io/2019/01/02/fonts-googleapis/</id>
    <published>2019-01-02T09:04:17.000Z</published>
    <updated>2022-01-05T07:51:52.318Z</updated>
    
    <content type="html"><![CDATA[<p>首先，fonts.googleapis.com解决的是客户端电脑没有安装字体，但是网站主又想客户看到自己想要的字体，通常的做法就是网站的css调用网站内部的字体文件，但是这样做非常不灵活，我们需要更换字体时，不然需要修改css，还需要替换字体文件，于是fonts.googleapis.com就可以解决这个问题。</p><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><p>CSS引入<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;subset=latin,latin-ext&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>链接的具体构成就是：<br>fonts.googleapis.com/css?family=<strong>字体名称</strong>:<strong>加粗程度</strong>,<strong>加粗程度+是否斜体</strong>&amp;subset=latin,latin-ext<br>其中如果需要多种字体用  <strong>|</strong>  隔开，如果有多种加粗程度<br>最后在需要使用的元素上加入font-family属性即可<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Monda&#x27;</span>, <span class="string">&#x27;PT Mono&#x27;</span> , serif;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">48px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>fonts.googleapis.com还有一种ajax请求方式，这里不推荐使用，css是最快也最容易维护的方式。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先，fonts.googleapis.com解决的是客户端电脑没有安装字体，但是网站主又想客户看到自己想要的字体，通常的做法就是网站的css调用网站内部的字体文件，但是这样做非常不灵活，我们需要更换字体时，不然需要修改css，还需要替换字体文件，于是fonts.googl
      
    
    </summary>
    
      <category term="HTML" scheme="https://hakunamatata052.github.io/categories/HTML/"/>
    
    
      <category term="googleapis" scheme="https://hakunamatata052.github.io/tags/googleapis/"/>
    
      <category term="字体" scheme="https://hakunamatata052.github.io/tags/%E5%AD%97%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加置顶功能和标识</title>
    <link href="https://hakunamatata052.github.io/2018/12/29/hexo-top/"/>
    <id>https://hakunamatata052.github.io/2018/12/29/hexo-top/</id>
    <published>2018-12-29T09:29:09.000Z</published>
    <updated>2022-01-05T07:51:52.409Z</updated>
    
    <content type="html"><![CDATA[<p>首先看下效果<br><img src="https://i.loli.net/2018/12/29/5c273ed38214d.png" alt="效果图"></p><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm uninstall hexo-generator-index --save</span><br><span class="line">$ npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure><h3 id="新建-修改-文章"><a href="#新建-修改-文章" class="headerlink" title="新建/修改 文章"></a>新建/修改 文章</h3><p>新建或修改文章时在文章<strong>Front-matter</strong>中加入<strong>top: true</strong>即可<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 无JS实现在线客服的切换效果</span><br><span class="line">date: 2018-12-20 15:05:17</span><br><span class="line">tags:</span><br><span class="line">    - css</span><br><span class="line">    - css3</span><br><span class="line">categories: CSS</span><br><span class="line">top: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><blockquote><p>到此为止，文章的置顶功能就实现了,但是我们还需要给置顶的文章加个标识，如<br><img src="https://i.loli.net/2018/12/29/5c2740bd13582.png" alt=""><br>So，我们需要加一个图标或者文字标签<br>这里我做了一个简单的，你可以修改一下，做一个好看的图标</p></blockquote><h3 id="添加标识"><a href="#添加标识" class="headerlink" title="添加标识"></a>添加标识</h3><p>如果你使用的是<strong>next</strong>的主题，打开目录<strong>themes/next/layout/_macro</strong>，找到文件post.swig，搜索<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;/&#123;% if theme.seo %&#125;h2&#123;% else %&#125;h1&#123;% endif %&#125;&gt;</span><br></pre></td></tr></table></figure><br>大概在65行，在他上面添加<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    &lt;span style=&quot;color:#f00;border:1px solid #f00;padding:2px 5px;font-size:12px;&quot;&gt;置顶&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><br>这是你会发现标识出现了，但是高度有些错位，在<strong>themes/next/source/_custom</strong>中找到<strong>custom.styl</strong>文件，添加一行<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>这时你就可以看到具体的效果了</p><blockquote><p>当然你可以添加更好看的图标，只需要修改HTML和CSS即可。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先看下效果&lt;br&gt;&lt;img src=&quot;https://i.loli.net/2018/12/29/5c273ed38214d.png&quot; alt=&quot;效果图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;具体实现&quot;&gt;&lt;a href=&quot;#具体实现&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="hexo" scheme="https://hakunamatata052.github.io/categories/hexo/"/>
    
    
      <category term="Hexo" scheme="https://hakunamatata052.github.io/tags/Hexo/"/>
    
      <category term="next" scheme="https://hakunamatata052.github.io/tags/next/"/>
    
  </entry>
  
</feed>
